"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.visionUseCase = void 0;
const convert_service_1 = require("src/service/convert-service");
const file_service_1 = require("src/service/file-service");
exports.visionUseCase = {
    processFolder: async (params) => {
        // TODO separate getting files filtering, and getting strategy for parsing and actual parsing
        const { folderPath } = params;
        const fileList = await file_service_1.fileService.fileListFromFolder(folderPath);
        const convertStrategies = fileList
            .map((f) => convert_service_1.convertService.strategyByFile({ filePath: f, folderPath }))
            .filter(Boolean);
        return (await Promise.all(convertStrategies.map((cs) => cs.convert()))).flat();
    },
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidmlzaW9uLXVzZS1jYXNlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vc3JjL3VzZS1jYXNlL3Zpc2lvbi11c2UtY2FzZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7QUFBQSxpRUFBNkU7QUFDN0UsMkRBQXNEO0FBR3pDLFFBQUEsYUFBYSxHQUFHO0lBQzNCLGFBQWEsRUFBRSxLQUFLLEVBQUUsTUFBOEIsRUFBcUIsRUFBRTtRQUN6RSw2RkFBNkY7UUFDN0YsTUFBTSxFQUFFLFVBQVUsRUFBRSxHQUFHLE1BQU0sQ0FBQTtRQUM3QixNQUFNLFFBQVEsR0FBRyxNQUFNLDBCQUFXLENBQUMsa0JBQWtCLENBQUMsVUFBVSxDQUFDLENBQUE7UUFDakUsTUFBTSxpQkFBaUIsR0FBRyxRQUFRO2FBQy9CLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsZ0NBQWMsQ0FBQyxjQUFjLENBQUMsRUFBRSxRQUFRLEVBQUUsQ0FBQyxFQUFFLFVBQVUsRUFBRSxDQUFDLENBQUM7YUFDdEUsTUFBTSxDQUFDLE9BQU8sQ0FBc0IsQ0FBQTtRQUN2QyxPQUFPLENBQUMsTUFBTSxPQUFPLENBQUMsR0FBRyxDQUFDLGlCQUFpQixDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUUsRUFBRSxFQUFFLENBQUMsRUFBRSxDQUFDLE9BQU8sRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksRUFBRSxDQUFBO0lBQ2hGLENBQUM7Q0FDRixDQUFBIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ29udmVydFN0cmF0ZWd5LCBjb252ZXJ0U2VydmljZSB9IGZyb20gJ3NyYy9zZXJ2aWNlL2NvbnZlcnQtc2VydmljZSdcbmltcG9ydCB7IGZpbGVTZXJ2aWNlIH0gZnJvbSAnc3JjL3NlcnZpY2UvZmlsZS1zZXJ2aWNlJ1xuaW1wb3J0IHsgRW50aXR5IH0gZnJvbSAnc3JjL3NlcnZpY2UvbW9kZWwvZW50aXR5J1xuXG5leHBvcnQgY29uc3QgdmlzaW9uVXNlQ2FzZSA9IHtcbiAgcHJvY2Vzc0ZvbGRlcjogYXN5bmMgKHBhcmFtczogeyBmb2xkZXJQYXRoOiBzdHJpbmcgfSk6IFByb21pc2U8RW50aXR5W10+ID0+IHtcbiAgICAvLyBUT0RPIHNlcGFyYXRlIGdldHRpbmcgZmlsZXMgZmlsdGVyaW5nLCBhbmQgZ2V0dGluZyBzdHJhdGVneSBmb3IgcGFyc2luZyBhbmQgYWN0dWFsIHBhcnNpbmdcbiAgICBjb25zdCB7IGZvbGRlclBhdGggfSA9IHBhcmFtc1xuICAgIGNvbnN0IGZpbGVMaXN0ID0gYXdhaXQgZmlsZVNlcnZpY2UuZmlsZUxpc3RGcm9tRm9sZGVyKGZvbGRlclBhdGgpXG4gICAgY29uc3QgY29udmVydFN0cmF0ZWdpZXMgPSBmaWxlTGlzdFxuICAgICAgLm1hcCgoZikgPT4gY29udmVydFNlcnZpY2Uuc3RyYXRlZ3lCeUZpbGUoeyBmaWxlUGF0aDogZiwgZm9sZGVyUGF0aCB9KSlcbiAgICAgIC5maWx0ZXIoQm9vbGVhbikgYXMgQ29udmVydFN0cmF0ZWd5W11cbiAgICByZXR1cm4gKGF3YWl0IFByb21pc2UuYWxsKGNvbnZlcnRTdHJhdGVnaWVzLm1hcCgoY3MpID0+IGNzLmNvbnZlcnQoKSkpKS5mbGF0KClcbiAgfSxcbn1cbiJdfQ==