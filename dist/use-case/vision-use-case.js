"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.visionUseCase = void 0;
const convert_service_1 = require("src/service/convert/convert-service");
const file_service_1 = require("src/service/file-service");
exports.visionUseCase = {
    processFolder: async ({ folderPath, printStrategy }) => {
        const fileList = await file_service_1.fileService.fileListFromFolder({ folderPath: folderPath });
        const convertStrategies = fileList
            .filter((f) => !f.endsWith('test.ts'))
            .map((f) => convert_service_1.convertService.strategyByFile({ filePath: f, folderPath: folderPath }))
            .filter(Boolean);
        const entities = (await Promise.all(convertStrategies.map((cs) => cs.convert()))).flat();
        if (!entities)
            return;
        await printStrategy.print({ entities });
    },
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidmlzaW9uLXVzZS1jYXNlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vc3JjL3VzZS1jYXNlL3Zpc2lvbi11c2UtY2FzZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7QUFBQSx5RUFBb0U7QUFFcEUsMkRBQXNEO0FBR3pDLFFBQUEsYUFBYSxHQUFHO0lBQzNCLGFBQWEsRUFBRSxLQUFLLEVBQUUsRUFBRSxVQUFVLEVBQUUsYUFBYSxFQUF3RCxFQUFpQixFQUFFO1FBQzFILE1BQU0sUUFBUSxHQUFHLE1BQU0sMEJBQVcsQ0FBQyxrQkFBa0IsQ0FBQyxFQUFFLFVBQVUsRUFBRSxVQUFVLEVBQUUsQ0FBQyxDQUFBO1FBQ2pGLE1BQU0saUJBQWlCLEdBQUcsUUFBUTthQUMvQixNQUFNLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxTQUFTLENBQUMsQ0FBQzthQUNyQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLGdDQUFjLENBQUMsY0FBYyxDQUFDLEVBQUUsUUFBUSxFQUFFLENBQUMsRUFBRSxVQUFVLEVBQUUsVUFBVSxFQUFFLENBQUMsQ0FBQzthQUNsRixNQUFNLENBQUMsT0FBTyxDQUFzQixDQUFBO1FBQ3ZDLE1BQU0sUUFBUSxHQUFHLENBQUMsTUFBTSxPQUFPLENBQUMsR0FBRyxDQUFDLGlCQUFpQixDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUUsRUFBRSxFQUFFLENBQUMsRUFBRSxDQUFDLE9BQU8sRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksRUFBRSxDQUFBO1FBQ3hGLElBQUksQ0FBQyxRQUFRO1lBQUUsT0FBTTtRQUNyQixNQUFNLGFBQWEsQ0FBQyxLQUFLLENBQUMsRUFBRSxRQUFRLEVBQUUsQ0FBQyxDQUFBO0lBQ3pDLENBQUM7Q0FDRixDQUFBIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY29udmVydFNlcnZpY2UgfSBmcm9tICdzcmMvc2VydmljZS9jb252ZXJ0L2NvbnZlcnQtc2VydmljZSdcbmltcG9ydCB7IENvbnZlcnRTdHJhdGVneSB9IGZyb20gJ3NyYy9zZXJ2aWNlL2NvbnZlcnQvY29udmVydC1zdHJhdGVneSdcbmltcG9ydCB7IGZpbGVTZXJ2aWNlIH0gZnJvbSAnc3JjL3NlcnZpY2UvZmlsZS1zZXJ2aWNlJ1xuaW1wb3J0IHsgUHJpbnRTdHJhdGVneSB9IGZyb20gJ3NyYy9zZXJ2aWNlL3ByaW50L3ByaW50LXN0cmF0ZWd5J1xuXG5leHBvcnQgY29uc3QgdmlzaW9uVXNlQ2FzZSA9IHtcbiAgcHJvY2Vzc0ZvbGRlcjogYXN5bmMgKHsgZm9sZGVyUGF0aCwgcHJpbnRTdHJhdGVneSB9OiB7IGZvbGRlclBhdGg6IHN0cmluZzsgcHJpbnRTdHJhdGVneTogUHJpbnRTdHJhdGVneSB9KTogUHJvbWlzZTx2b2lkPiA9PiB7XG4gICAgY29uc3QgZmlsZUxpc3QgPSBhd2FpdCBmaWxlU2VydmljZS5maWxlTGlzdEZyb21Gb2xkZXIoeyBmb2xkZXJQYXRoOiBmb2xkZXJQYXRoIH0pXG4gICAgY29uc3QgY29udmVydFN0cmF0ZWdpZXMgPSBmaWxlTGlzdFxuICAgICAgLmZpbHRlcigoZikgPT4gIWYuZW5kc1dpdGgoJ3Rlc3QudHMnKSlcbiAgICAgIC5tYXAoKGYpID0+IGNvbnZlcnRTZXJ2aWNlLnN0cmF0ZWd5QnlGaWxlKHsgZmlsZVBhdGg6IGYsIGZvbGRlclBhdGg6IGZvbGRlclBhdGggfSkpXG4gICAgICAuZmlsdGVyKEJvb2xlYW4pIGFzIENvbnZlcnRTdHJhdGVneVtdXG4gICAgY29uc3QgZW50aXRpZXMgPSAoYXdhaXQgUHJvbWlzZS5hbGwoY29udmVydFN0cmF0ZWdpZXMubWFwKChjcykgPT4gY3MuY29udmVydCgpKSkpLmZsYXQoKVxuICAgIGlmICghZW50aXRpZXMpIHJldHVyblxuICAgIGF3YWl0IHByaW50U3RyYXRlZ3kucHJpbnQoeyBlbnRpdGllcyB9KVxuICB9LFxufVxuIl19