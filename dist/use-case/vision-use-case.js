"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.visionUseCase = void 0;
const file_dao_1 = require("src/dal/file-dao");
const parser_service_1 = require("src/service/parser-service");
const _self = {
    parseFolder: async (params) => {
        const { projectPath } = params;
        const fileList = await file_dao_1.fileDao.fileListFromFolder(projectPath);
        const convertStrategies = fileList
            .map((f) => parser_service_1.parserService.strategyByFile({ filePath: f, projectPath: projectPath }))
            .filter(Boolean);
        return (await Promise.all(convertStrategies.map((cs) => cs.convert()))).flat();
    },
};
exports.visionUseCase = _self;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidmlzaW9uLXVzZS1jYXNlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vc3JjL3VzZS1jYXNlL3Zpc2lvbi11c2UtY2FzZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7QUFBQSwrQ0FBMEM7QUFFMUMsK0RBQTJFO0FBRTNFLE1BQU0sS0FBSyxHQUFHO0lBQ1osV0FBVyxFQUFFLEtBQUssRUFBRSxNQUErQixFQUFxQixFQUFFO1FBQ3hFLE1BQU0sRUFBRSxXQUFXLEVBQUUsR0FBRyxNQUFNLENBQUE7UUFDOUIsTUFBTSxRQUFRLEdBQUcsTUFBTSxrQkFBTyxDQUFDLGtCQUFrQixDQUFDLFdBQVcsQ0FBQyxDQUFBO1FBQzlELE1BQU0saUJBQWlCLEdBQUcsUUFBUTthQUMvQixHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLDhCQUFhLENBQUMsY0FBYyxDQUFDLEVBQUUsUUFBUSxFQUFFLENBQUMsRUFBRSxXQUFXLEVBQUUsV0FBVyxFQUFFLENBQUMsQ0FBQzthQUNuRixNQUFNLENBQUMsT0FBTyxDQUFzQixDQUFBO1FBQ3ZDLE9BQU8sQ0FBQyxNQUFNLE9BQU8sQ0FBQyxHQUFHLENBQUMsaUJBQWlCLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRSxFQUFFLEVBQUUsQ0FBQyxFQUFFLENBQUMsT0FBTyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxFQUFFLENBQUE7SUFDaEYsQ0FBQztDQUNGLENBQUE7QUFFWSxRQUFBLGFBQWEsR0FBRyxLQUFLLENBQUEiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBmaWxlRGFvIH0gZnJvbSAnc3JjL2RhbC9maWxlLWRhbydcbmltcG9ydCB7IEVudGl0eSB9IGZyb20gJ3NyYy9tb2RlbC9lbnRpdHknXG5pbXBvcnQgeyBDb252ZXJ0U3RyYXRlZ3ksIHBhcnNlclNlcnZpY2UgfSBmcm9tICdzcmMvc2VydmljZS9wYXJzZXItc2VydmljZSdcblxuY29uc3QgX3NlbGYgPSB7XG4gIHBhcnNlRm9sZGVyOiBhc3luYyAocGFyYW1zOiB7IHByb2plY3RQYXRoOiBzdHJpbmcgfSk6IFByb21pc2U8RW50aXR5W10+ID0+IHtcbiAgICBjb25zdCB7IHByb2plY3RQYXRoIH0gPSBwYXJhbXNcbiAgICBjb25zdCBmaWxlTGlzdCA9IGF3YWl0IGZpbGVEYW8uZmlsZUxpc3RGcm9tRm9sZGVyKHByb2plY3RQYXRoKVxuICAgIGNvbnN0IGNvbnZlcnRTdHJhdGVnaWVzID0gZmlsZUxpc3RcbiAgICAgIC5tYXAoKGYpID0+IHBhcnNlclNlcnZpY2Uuc3RyYXRlZ3lCeUZpbGUoeyBmaWxlUGF0aDogZiwgcHJvamVjdFBhdGg6IHByb2plY3RQYXRoIH0pKVxuICAgICAgLmZpbHRlcihCb29sZWFuKSBhcyBDb252ZXJ0U3RyYXRlZ3lbXVxuICAgIHJldHVybiAoYXdhaXQgUHJvbWlzZS5hbGwoY29udmVydFN0cmF0ZWdpZXMubWFwKChjcykgPT4gY3MuY29udmVydCgpKSkpLmZsYXQoKVxuICB9LFxufVxuXG5leHBvcnQgY29uc3QgdmlzaW9uVXNlQ2FzZSA9IF9zZWxmXG4iXX0=