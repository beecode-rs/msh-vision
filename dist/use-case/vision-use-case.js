"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.visionUseCase = void 0;
const convert_service_1 = require("src/service/convert/convert-service");
const file_service_1 = require("src/service/file-service");
exports.visionUseCase = {
    processFolder: async (params) => {
        const { folderPath, printStrategy } = params;
        const fileList = await file_service_1.fileService.fileListFromFolder(folderPath);
        const convertStrategies = fileList
            // .filter((f) => !f.endsWith('test.ts'))
            .map((f) => convert_service_1.convertService.strategyByFile({ filePath: f, folderPath }))
            .filter(Boolean);
        const entities = (await Promise.all(convertStrategies.map((cs) => cs.convert()))).flat();
        if (!entities)
            return;
        await printStrategy.print({ entities });
    },
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidmlzaW9uLXVzZS1jYXNlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vc3JjL3VzZS1jYXNlL3Zpc2lvbi11c2UtY2FzZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7QUFBQSx5RUFBb0U7QUFFcEUsMkRBQXNEO0FBR3pDLFFBQUEsYUFBYSxHQUFHO0lBQzNCLGFBQWEsRUFBRSxLQUFLLEVBQUUsTUFBNEQsRUFBaUIsRUFBRTtRQUNuRyxNQUFNLEVBQUUsVUFBVSxFQUFFLGFBQWEsRUFBRSxHQUFHLE1BQU0sQ0FBQTtRQUM1QyxNQUFNLFFBQVEsR0FBRyxNQUFNLDBCQUFXLENBQUMsa0JBQWtCLENBQUMsVUFBVSxDQUFDLENBQUE7UUFDakUsTUFBTSxpQkFBaUIsR0FBRyxRQUFRO1lBQ2hDLHlDQUF5QzthQUN4QyxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLGdDQUFjLENBQUMsY0FBYyxDQUFDLEVBQUUsUUFBUSxFQUFFLENBQUMsRUFBRSxVQUFVLEVBQUUsQ0FBQyxDQUFDO2FBQ3RFLE1BQU0sQ0FBQyxPQUFPLENBQXNCLENBQUE7UUFDdkMsTUFBTSxRQUFRLEdBQUcsQ0FBQyxNQUFNLE9BQU8sQ0FBQyxHQUFHLENBQUMsaUJBQWlCLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRSxFQUFFLEVBQUUsQ0FBQyxFQUFFLENBQUMsT0FBTyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxFQUFFLENBQUE7UUFDeEYsSUFBSSxDQUFDLFFBQVE7WUFBRSxPQUFNO1FBQ3JCLE1BQU0sYUFBYSxDQUFDLEtBQUssQ0FBQyxFQUFFLFFBQVEsRUFBRSxDQUFDLENBQUE7SUFDekMsQ0FBQztDQUNGLENBQUEiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjb252ZXJ0U2VydmljZSB9IGZyb20gJ3NyYy9zZXJ2aWNlL2NvbnZlcnQvY29udmVydC1zZXJ2aWNlJ1xuaW1wb3J0IHsgQ29udmVydFN0cmF0ZWd5IH0gZnJvbSAnc3JjL3NlcnZpY2UvY29udmVydC9jb252ZXJ0LXN0cmF0ZWd5J1xuaW1wb3J0IHsgZmlsZVNlcnZpY2UgfSBmcm9tICdzcmMvc2VydmljZS9maWxlLXNlcnZpY2UnXG5pbXBvcnQgeyBQcmludFN0cmF0ZWd5IH0gZnJvbSAnc3JjL3NlcnZpY2UvcHJpbnQvcHJpbnQtc3RyYXRlZ3knXG5cbmV4cG9ydCBjb25zdCB2aXNpb25Vc2VDYXNlID0ge1xuICBwcm9jZXNzRm9sZGVyOiBhc3luYyAocGFyYW1zOiB7IGZvbGRlclBhdGg6IHN0cmluZzsgcHJpbnRTdHJhdGVneTogUHJpbnRTdHJhdGVneSB9KTogUHJvbWlzZTx2b2lkPiA9PiB7XG4gICAgY29uc3QgeyBmb2xkZXJQYXRoLCBwcmludFN0cmF0ZWd5IH0gPSBwYXJhbXNcbiAgICBjb25zdCBmaWxlTGlzdCA9IGF3YWl0IGZpbGVTZXJ2aWNlLmZpbGVMaXN0RnJvbUZvbGRlcihmb2xkZXJQYXRoKVxuICAgIGNvbnN0IGNvbnZlcnRTdHJhdGVnaWVzID0gZmlsZUxpc3RcbiAgICAgIC8vIC5maWx0ZXIoKGYpID0+ICFmLmVuZHNXaXRoKCd0ZXN0LnRzJykpXG4gICAgICAubWFwKChmKSA9PiBjb252ZXJ0U2VydmljZS5zdHJhdGVneUJ5RmlsZSh7IGZpbGVQYXRoOiBmLCBmb2xkZXJQYXRoIH0pKVxuICAgICAgLmZpbHRlcihCb29sZWFuKSBhcyBDb252ZXJ0U3RyYXRlZ3lbXVxuICAgIGNvbnN0IGVudGl0aWVzID0gKGF3YWl0IFByb21pc2UuYWxsKGNvbnZlcnRTdHJhdGVnaWVzLm1hcCgoY3MpID0+IGNzLmNvbnZlcnQoKSkpKS5mbGF0KClcbiAgICBpZiAoIWVudGl0aWVzKSByZXR1cm5cbiAgICBhd2FpdCBwcmludFN0cmF0ZWd5LnByaW50KHsgZW50aXRpZXMgfSlcbiAgfSxcbn1cbiJdfQ==