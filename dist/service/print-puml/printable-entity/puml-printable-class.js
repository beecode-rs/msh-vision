"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.PumlPrintableClass = void 0;
const property_1 = require("src/model/property");
const puml_printable_property_1 = require("src/service/print-puml/printable-entity/puml-printable-property");
const puml_entity_1 = require("src/service/print-puml/puml-entity");
const puml_relation_1 = require("src/service/print-puml/puml-relation");
class PumlPrintableClass extends puml_entity_1.PumlEntity {
    _entity;
    _templateEnd() {
        return '}';
    }
    _templateStart() {
        return `${this._entity.Meta.IsAbstract ? 'abstract' : 'class'} "${this._entity.Name}" as ${this._entity.Id} {`;
    }
    constructor(params) {
        const { entity } = params;
        super();
        this._entity = entity;
        this._relations = entity.References.map((r) => new puml_relation_1.PumlRelation({ reference: r, fromEntity: entity }));
    }
    _print() {
        return this._entity.Meta.Properties.sort(property_1.Property.SortByName)
            .map((p) => this._printProperty(p))
            .filter(Boolean);
    }
    _printProperty(property) {
        return new puml_printable_property_1.PumlPrintableProperty({ property }).print();
    }
}
exports.PumlPrintableClass = PumlPrintableClass;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicHVtbC1wcmludGFibGUtY2xhc3MuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi9zcmMvc2VydmljZS9wcmludC1wdW1sL3ByaW50YWJsZS1lbnRpdHkvcHVtbC1wcmludGFibGUtY2xhc3MudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7O0FBRUEsaURBQTZDO0FBQzdDLDZHQUF1RztBQUN2RyxvRUFBK0Q7QUFDL0Qsd0VBQW1FO0FBRW5FLE1BQWEsa0JBQW1CLFNBQVEsd0JBQVU7SUFDN0IsT0FBTyxDQUEyQjtJQUUzQyxZQUFZO1FBQ3BCLE9BQU8sR0FBRyxDQUFBO0lBQ1osQ0FBQztJQUNTLGNBQWM7UUFDdEIsT0FBTyxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxPQUFPLEtBQUssSUFBSSxDQUFDLE9BQU8sQ0FBQyxJQUFJLFFBQVEsSUFBSSxDQUFDLE9BQU8sQ0FBQyxFQUFFLElBQUksQ0FBQTtJQUNoSCxDQUFDO0lBRUQsWUFBWSxNQUE2QztRQUN2RCxNQUFNLEVBQUUsTUFBTSxFQUFFLEdBQUcsTUFBTSxDQUFBO1FBQ3pCLEtBQUssRUFBRSxDQUFBO1FBQ1AsSUFBSSxDQUFDLE9BQU8sR0FBRyxNQUFNLENBQUE7UUFDckIsSUFBSSxDQUFDLFVBQVUsR0FBRyxNQUFNLENBQUMsVUFBVSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsSUFBSSw0QkFBWSxDQUFDLEVBQUUsU0FBUyxFQUFFLENBQUMsRUFBRSxVQUFVLEVBQUUsTUFBTSxFQUFFLENBQUMsQ0FBQyxDQUFBO0lBQ3hHLENBQUM7SUFFUyxNQUFNO1FBQ2QsT0FBTyxJQUFJLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDLG1CQUFRLENBQUMsVUFBVSxDQUFDO2FBQzFELEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsSUFBSSxDQUFDLGNBQWMsQ0FBQyxDQUFDLENBQUMsQ0FBQzthQUNsQyxNQUFNLENBQUMsT0FBTyxDQUFDLENBQUE7SUFDcEIsQ0FBQztJQUVTLGNBQWMsQ0FBQyxRQUFrQjtRQUN6QyxPQUFPLElBQUksK0NBQXFCLENBQUMsRUFBRSxRQUFRLEVBQUUsQ0FBQyxDQUFDLEtBQUssRUFBRSxDQUFBO0lBQ3hELENBQUM7Q0FDRjtBQTFCRCxnREEwQkMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBFbnRpdHlUeXBlcyB9IGZyb20gJ3NyYy9lbnVtL2VudGl0eS10eXBlcydcbmltcG9ydCB7IEVudGl0eSB9IGZyb20gJ3NyYy9tb2RlbC9lbnRpdHknXG5pbXBvcnQgeyBQcm9wZXJ0eSB9IGZyb20gJ3NyYy9tb2RlbC9wcm9wZXJ0eSdcbmltcG9ydCB7IFB1bWxQcmludGFibGVQcm9wZXJ0eSB9IGZyb20gJ3NyYy9zZXJ2aWNlL3ByaW50LXB1bWwvcHJpbnRhYmxlLWVudGl0eS9wdW1sLXByaW50YWJsZS1wcm9wZXJ0eSdcbmltcG9ydCB7IFB1bWxFbnRpdHkgfSBmcm9tICdzcmMvc2VydmljZS9wcmludC1wdW1sL3B1bWwtZW50aXR5J1xuaW1wb3J0IHsgUHVtbFJlbGF0aW9uIH0gZnJvbSAnc3JjL3NlcnZpY2UvcHJpbnQtcHVtbC9wdW1sLXJlbGF0aW9uJ1xuXG5leHBvcnQgY2xhc3MgUHVtbFByaW50YWJsZUNsYXNzIGV4dGVuZHMgUHVtbEVudGl0eSB7XG4gIHByb3RlY3RlZCByZWFkb25seSBfZW50aXR5OiBFbnRpdHk8RW50aXR5VHlwZXMuQ0xBU1M+XG5cbiAgcHJvdGVjdGVkIF90ZW1wbGF0ZUVuZCgpOiBzdHJpbmcge1xuICAgIHJldHVybiAnfSdcbiAgfVxuICBwcm90ZWN0ZWQgX3RlbXBsYXRlU3RhcnQoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gYCR7dGhpcy5fZW50aXR5Lk1ldGEuSXNBYnN0cmFjdCA/ICdhYnN0cmFjdCcgOiAnY2xhc3MnfSBcIiR7dGhpcy5fZW50aXR5Lk5hbWV9XCIgYXMgJHt0aGlzLl9lbnRpdHkuSWR9IHtgXG4gIH1cblxuICBjb25zdHJ1Y3RvcihwYXJhbXM6IHsgZW50aXR5OiBFbnRpdHk8RW50aXR5VHlwZXMuQ0xBU1M+IH0pIHtcbiAgICBjb25zdCB7IGVudGl0eSB9ID0gcGFyYW1zXG4gICAgc3VwZXIoKVxuICAgIHRoaXMuX2VudGl0eSA9IGVudGl0eVxuICAgIHRoaXMuX3JlbGF0aW9ucyA9IGVudGl0eS5SZWZlcmVuY2VzLm1hcCgocikgPT4gbmV3IFB1bWxSZWxhdGlvbih7IHJlZmVyZW5jZTogciwgZnJvbUVudGl0eTogZW50aXR5IH0pKVxuICB9XG5cbiAgcHJvdGVjdGVkIF9wcmludCgpOiBzdHJpbmdbXSB7XG4gICAgcmV0dXJuIHRoaXMuX2VudGl0eS5NZXRhLlByb3BlcnRpZXMuc29ydChQcm9wZXJ0eS5Tb3J0QnlOYW1lKVxuICAgICAgLm1hcCgocCkgPT4gdGhpcy5fcHJpbnRQcm9wZXJ0eShwKSlcbiAgICAgIC5maWx0ZXIoQm9vbGVhbilcbiAgfVxuXG4gIHByb3RlY3RlZCBfcHJpbnRQcm9wZXJ0eShwcm9wZXJ0eTogUHJvcGVydHkpOiBzdHJpbmcge1xuICAgIHJldHVybiBuZXcgUHVtbFByaW50YWJsZVByb3BlcnR5KHsgcHJvcGVydHkgfSkucHJpbnQoKVxuICB9XG59XG4iXX0=