"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.PumlPrintableObject = void 0;
const property_1 = require("src/model/property");
const puml_printable_property_1 = require("src/service/print-puml/printable-entity/puml-printable-property");
const puml_entity_1 = require("src/service/print-puml/puml-entity");
const puml_relation_1 = require("src/service/print-puml/puml-relation");
class PumlPrintableObject extends puml_entity_1.PumlEntity {
    _entity;
    _templateEnd() {
        return '}';
    }
    _templateStart() {
        return `object "${this._entity.Name}" as ${this._entity.Id} {`;
    }
    constructor(params) {
        const { entity } = params;
        super();
        this._entity = entity;
        this._relations = entity.References.map((r) => new puml_relation_1.PumlRelation({ reference: r, fromEntity: entity }));
    }
    _print() {
        return this._entity.Meta.Properties.sort(property_1.Property.SortByName)
            .map((p) => this._printProperty(p))
            .filter(Boolean);
    }
    _printProperty(property) {
        return new puml_printable_property_1.PumlPrintableProperty({ property }).print();
    }
}
exports.PumlPrintableObject = PumlPrintableObject;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicHVtbC1wcmludGFibGUtb2JqZWN0LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vc3JjL3NlcnZpY2UvcHJpbnQtcHVtbC9wcmludGFibGUtZW50aXR5L3B1bWwtcHJpbnRhYmxlLW9iamVjdC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7QUFFQSxpREFBNkM7QUFDN0MsNkdBQXVHO0FBQ3ZHLG9FQUErRDtBQUMvRCx3RUFBbUU7QUFFbkUsTUFBYSxtQkFBb0IsU0FBUSx3QkFBVTtJQUM5QixPQUFPLENBQTRCO0lBRTVDLFlBQVk7UUFDcEIsT0FBTyxHQUFHLENBQUE7SUFDWixDQUFDO0lBQ1MsY0FBYztRQUN0QixPQUFPLFdBQVcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxJQUFJLFFBQVEsSUFBSSxDQUFDLE9BQU8sQ0FBQyxFQUFFLElBQUksQ0FBQTtJQUNoRSxDQUFDO0lBRUQsWUFBbUIsTUFBOEM7UUFDL0QsTUFBTSxFQUFFLE1BQU0sRUFBRSxHQUFHLE1BQU0sQ0FBQTtRQUN6QixLQUFLLEVBQUUsQ0FBQTtRQUNQLElBQUksQ0FBQyxPQUFPLEdBQUcsTUFBTSxDQUFBO1FBQ3JCLElBQUksQ0FBQyxVQUFVLEdBQUcsTUFBTSxDQUFDLFVBQVUsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLElBQUksNEJBQVksQ0FBQyxFQUFFLFNBQVMsRUFBRSxDQUFDLEVBQUUsVUFBVSxFQUFFLE1BQU0sRUFBRSxDQUFDLENBQUMsQ0FBQTtJQUN4RyxDQUFDO0lBRVMsTUFBTTtRQUNkLE9BQU8sSUFBSSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxtQkFBUSxDQUFDLFVBQVUsQ0FBQzthQUMxRCxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLElBQUksQ0FBQyxjQUFjLENBQUMsQ0FBQyxDQUFDLENBQUM7YUFDbEMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxDQUFBO0lBQ3BCLENBQUM7SUFFUyxjQUFjLENBQUMsUUFBa0I7UUFDekMsT0FBTyxJQUFJLCtDQUFxQixDQUFDLEVBQUUsUUFBUSxFQUFFLENBQUMsQ0FBQyxLQUFLLEVBQUUsQ0FBQTtJQUN4RCxDQUFDO0NBQ0Y7QUExQkQsa0RBMEJDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRW50aXR5VHlwZXMgfSBmcm9tICdzcmMvZW51bS9lbnRpdHktdHlwZXMnXG5pbXBvcnQgeyBFbnRpdHkgfSBmcm9tICdzcmMvbW9kZWwvZW50aXR5J1xuaW1wb3J0IHsgUHJvcGVydHkgfSBmcm9tICdzcmMvbW9kZWwvcHJvcGVydHknXG5pbXBvcnQgeyBQdW1sUHJpbnRhYmxlUHJvcGVydHkgfSBmcm9tICdzcmMvc2VydmljZS9wcmludC1wdW1sL3ByaW50YWJsZS1lbnRpdHkvcHVtbC1wcmludGFibGUtcHJvcGVydHknXG5pbXBvcnQgeyBQdW1sRW50aXR5IH0gZnJvbSAnc3JjL3NlcnZpY2UvcHJpbnQtcHVtbC9wdW1sLWVudGl0eSdcbmltcG9ydCB7IFB1bWxSZWxhdGlvbiB9IGZyb20gJ3NyYy9zZXJ2aWNlL3ByaW50LXB1bWwvcHVtbC1yZWxhdGlvbidcblxuZXhwb3J0IGNsYXNzIFB1bWxQcmludGFibGVPYmplY3QgZXh0ZW5kcyBQdW1sRW50aXR5IHtcbiAgcHJvdGVjdGVkIHJlYWRvbmx5IF9lbnRpdHk6IEVudGl0eTxFbnRpdHlUeXBlcy5PQkpFQ1Q+XG5cbiAgcHJvdGVjdGVkIF90ZW1wbGF0ZUVuZCgpOiBzdHJpbmcge1xuICAgIHJldHVybiAnfSdcbiAgfVxuICBwcm90ZWN0ZWQgX3RlbXBsYXRlU3RhcnQoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gYG9iamVjdCBcIiR7dGhpcy5fZW50aXR5Lk5hbWV9XCIgYXMgJHt0aGlzLl9lbnRpdHkuSWR9IHtgXG4gIH1cblxuICBwdWJsaWMgY29uc3RydWN0b3IocGFyYW1zOiB7IGVudGl0eTogRW50aXR5PEVudGl0eVR5cGVzLk9CSkVDVD4gfSkge1xuICAgIGNvbnN0IHsgZW50aXR5IH0gPSBwYXJhbXNcbiAgICBzdXBlcigpXG4gICAgdGhpcy5fZW50aXR5ID0gZW50aXR5XG4gICAgdGhpcy5fcmVsYXRpb25zID0gZW50aXR5LlJlZmVyZW5jZXMubWFwKChyKSA9PiBuZXcgUHVtbFJlbGF0aW9uKHsgcmVmZXJlbmNlOiByLCBmcm9tRW50aXR5OiBlbnRpdHkgfSkpXG4gIH1cblxuICBwcm90ZWN0ZWQgX3ByaW50KCk6IHN0cmluZ1tdIHtcbiAgICByZXR1cm4gdGhpcy5fZW50aXR5Lk1ldGEuUHJvcGVydGllcy5zb3J0KFByb3BlcnR5LlNvcnRCeU5hbWUpXG4gICAgICAubWFwKChwKSA9PiB0aGlzLl9wcmludFByb3BlcnR5KHApKVxuICAgICAgLmZpbHRlcihCb29sZWFuKVxuICB9XG5cbiAgcHJvdGVjdGVkIF9wcmludFByb3BlcnR5KHByb3BlcnR5OiBQcm9wZXJ0eSk6IHN0cmluZyB7XG4gICAgcmV0dXJuIG5ldyBQdW1sUHJpbnRhYmxlUHJvcGVydHkoeyBwcm9wZXJ0eSB9KS5wcmludCgpXG4gIH1cbn1cbiJdfQ==