"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.PumlEntity = void 0;
const constant_1 = require("src/util/constant");
class PumlEntity {
    constructor() {
        this._children = [];
        this._relations = [];
    }
    print() {
        const bodyTemplate = [];
        bodyTemplate.push(...this._children.map((c) => c.print()));
        bodyTemplate.push(...this._print());
        const template = [];
        if (this._templateStart())
            template.push(this._templateStart());
        template.push(...this._indentRows(bodyTemplate));
        if (this._templateEnd())
            template.push(this._templateEnd());
        return template.join(constant_1.constant.newRow);
    }
    _indentRows(templates) {
        return templates.map((template) => template
            .split(constant_1.constant.newRow)
            .map((row) => `  ${row}`)
            .join(constant_1.constant.newRow));
    }
    addChildren(printable) {
        this._children.push(printable);
    }
    printRelations() {
        const template = [];
        template.push(...this._relations.map((r) => r.print()));
        return template.join(constant_1.constant.newRow);
    }
}
exports.PumlEntity = PumlEntity;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicHVtbC1lbnRpdHkuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi9zcmMvc2VydmljZS9wcmludC9wdW1sL3B1bWwtZW50aXR5LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7OztBQUNBLGdEQUE0QztBQUU1QyxNQUFzQixVQUFVO0lBQWhDO1FBQ1ksY0FBUyxHQUFpQixFQUFFLENBQUE7UUFDNUIsZUFBVSxHQUFtQixFQUFFLENBQUE7SUFxQzNDLENBQUM7SUEvQlEsS0FBSztRQUNWLE1BQU0sWUFBWSxHQUFhLEVBQUUsQ0FBQTtRQUNqQyxZQUFZLENBQUMsSUFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDLFNBQVMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQyxLQUFLLEVBQUUsQ0FBQyxDQUFDLENBQUE7UUFDMUQsWUFBWSxDQUFDLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxNQUFNLEVBQUUsQ0FBQyxDQUFBO1FBRW5DLE1BQU0sUUFBUSxHQUFhLEVBQUUsQ0FBQTtRQUM3QixJQUFJLElBQUksQ0FBQyxjQUFjLEVBQUU7WUFBRSxRQUFRLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxjQUFjLEVBQUUsQ0FBQyxDQUFBO1FBQy9ELFFBQVEsQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsV0FBVyxDQUFDLFlBQVksQ0FBQyxDQUFDLENBQUE7UUFDaEQsSUFBSSxJQUFJLENBQUMsWUFBWSxFQUFFO1lBQUUsUUFBUSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsWUFBWSxFQUFFLENBQUMsQ0FBQTtRQUUzRCxPQUFPLFFBQVEsQ0FBQyxJQUFJLENBQUMsbUJBQVEsQ0FBQyxNQUFNLENBQUMsQ0FBQTtJQUN2QyxDQUFDO0lBRVMsV0FBVyxDQUFDLFNBQW1CO1FBQ3ZDLE9BQU8sU0FBUyxDQUFDLEdBQUcsQ0FBQyxDQUFDLFFBQVEsRUFBRSxFQUFFLENBQ2hDLFFBQVE7YUFDTCxLQUFLLENBQUMsbUJBQVEsQ0FBQyxNQUFNLENBQUM7YUFDdEIsR0FBRyxDQUFDLENBQUMsR0FBRyxFQUFFLEVBQUUsQ0FBQyxLQUFLLEdBQUcsRUFBRSxDQUFDO2FBQ3hCLElBQUksQ0FBQyxtQkFBUSxDQUFDLE1BQU0sQ0FBQyxDQUN6QixDQUFBO0lBQ0gsQ0FBQztJQUVNLFdBQVcsQ0FBQyxTQUFxQjtRQUN0QyxJQUFJLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQTtJQUNoQyxDQUFDO0lBRU0sY0FBYztRQUNuQixNQUFNLFFBQVEsR0FBYSxFQUFFLENBQUE7UUFDN0IsUUFBUSxDQUFDLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxVQUFVLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsS0FBSyxFQUFFLENBQUMsQ0FBQyxDQUFBO1FBQ3ZELE9BQU8sUUFBUSxDQUFDLElBQUksQ0FBQyxtQkFBUSxDQUFDLE1BQU0sQ0FBQyxDQUFBO0lBQ3ZDLENBQUM7Q0FDRjtBQXZDRCxnQ0F1Q0MiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQdW1sUmVsYXRpb24gfSBmcm9tICdzcmMvc2VydmljZS9wcmludC9wdW1sL3B1bWwtcmVsYXRpb24nXG5pbXBvcnQgeyBjb25zdGFudCB9IGZyb20gJ3NyYy91dGlsL2NvbnN0YW50J1xuXG5leHBvcnQgYWJzdHJhY3QgY2xhc3MgUHVtbEVudGl0eSB7XG4gIHByb3RlY3RlZCBfY2hpbGRyZW46IFB1bWxFbnRpdHlbXSA9IFtdXG4gIHByb3RlY3RlZCBfcmVsYXRpb25zOiBQdW1sUmVsYXRpb25bXSA9IFtdXG5cbiAgcHJvdGVjdGVkIGFic3RyYWN0IF90ZW1wbGF0ZUVuZCgpOiBzdHJpbmdcbiAgcHJvdGVjdGVkIGFic3RyYWN0IF90ZW1wbGF0ZVN0YXJ0KCk6IHN0cmluZ1xuICBwcm90ZWN0ZWQgYWJzdHJhY3QgX3ByaW50KCk6IHN0cmluZ1tdXG5cbiAgcHVibGljIHByaW50KCk6IHN0cmluZyB7XG4gICAgY29uc3QgYm9keVRlbXBsYXRlOiBzdHJpbmdbXSA9IFtdXG4gICAgYm9keVRlbXBsYXRlLnB1c2goLi4udGhpcy5fY2hpbGRyZW4ubWFwKChjKSA9PiBjLnByaW50KCkpKVxuICAgIGJvZHlUZW1wbGF0ZS5wdXNoKC4uLnRoaXMuX3ByaW50KCkpXG5cbiAgICBjb25zdCB0ZW1wbGF0ZTogc3RyaW5nW10gPSBbXVxuICAgIGlmICh0aGlzLl90ZW1wbGF0ZVN0YXJ0KCkpIHRlbXBsYXRlLnB1c2godGhpcy5fdGVtcGxhdGVTdGFydCgpKVxuICAgIHRlbXBsYXRlLnB1c2goLi4udGhpcy5faW5kZW50Um93cyhib2R5VGVtcGxhdGUpKVxuICAgIGlmICh0aGlzLl90ZW1wbGF0ZUVuZCgpKSB0ZW1wbGF0ZS5wdXNoKHRoaXMuX3RlbXBsYXRlRW5kKCkpXG5cbiAgICByZXR1cm4gdGVtcGxhdGUuam9pbihjb25zdGFudC5uZXdSb3cpXG4gIH1cblxuICBwcm90ZWN0ZWQgX2luZGVudFJvd3ModGVtcGxhdGVzOiBzdHJpbmdbXSk6IHN0cmluZ1tdIHtcbiAgICByZXR1cm4gdGVtcGxhdGVzLm1hcCgodGVtcGxhdGUpID0+XG4gICAgICB0ZW1wbGF0ZVxuICAgICAgICAuc3BsaXQoY29uc3RhbnQubmV3Um93KVxuICAgICAgICAubWFwKChyb3cpID0+IGAgICR7cm93fWApXG4gICAgICAgIC5qb2luKGNvbnN0YW50Lm5ld1JvdylcbiAgICApXG4gIH1cblxuICBwdWJsaWMgYWRkQ2hpbGRyZW4ocHJpbnRhYmxlOiBQdW1sRW50aXR5KTogdm9pZCB7XG4gICAgdGhpcy5fY2hpbGRyZW4ucHVzaChwcmludGFibGUpXG4gIH1cblxuICBwdWJsaWMgcHJpbnRSZWxhdGlvbnMoKTogc3RyaW5nIHtcbiAgICBjb25zdCB0ZW1wbGF0ZTogc3RyaW5nW10gPSBbXVxuICAgIHRlbXBsYXRlLnB1c2goLi4udGhpcy5fcmVsYXRpb25zLm1hcCgocikgPT4gci5wcmludCgpKSlcbiAgICByZXR1cm4gdGVtcGxhdGUuam9pbihjb25zdGFudC5uZXdSb3cpXG4gIH1cbn1cbiJdfQ==