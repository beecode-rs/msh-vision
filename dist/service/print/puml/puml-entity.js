"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.PumlEntity = void 0;
const constant_1 = require("src/util/constant");
class PumlEntity {
    constructor() {
        this._children = [];
        this._relations = [];
    }
    print() {
        const bodyTemplate = [];
        bodyTemplate.push(...this._children.map((c) => c.print()).filter(Boolean));
        bodyTemplate.push(...this._print());
        const template = [];
        if (this._templateStart())
            template.push(this._templateStart());
        template.push(...this._indentRows(bodyTemplate));
        if (this._templateEnd())
            template.push(this._templateEnd());
        return template.join(constant_1.constant.newRow);
    }
    _indentRows(templates) {
        return templates.map((template) => template
            .split(constant_1.constant.newRow)
            .map((row) => `  ${row}`)
            .join(constant_1.constant.newRow));
    }
    addChildren(printable) {
        this._children.push(printable);
    }
    printRelations() {
        const template = [];
        template.push(...this._relations.map((r) => r.print()).filter(Boolean));
        return template.join(constant_1.constant.newRow);
    }
}
exports.PumlEntity = PumlEntity;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicHVtbC1lbnRpdHkuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi9zcmMvc2VydmljZS9wcmludC9wdW1sL3B1bWwtZW50aXR5LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7OztBQUNBLGdEQUE0QztBQUU1QyxNQUFzQixVQUFVO0lBQWhDO1FBQ1ksY0FBUyxHQUFpQixFQUFFLENBQUE7UUFDNUIsZUFBVSxHQUFtQixFQUFFLENBQUE7SUFxQzNDLENBQUM7SUEvQlEsS0FBSztRQUNWLE1BQU0sWUFBWSxHQUFhLEVBQUUsQ0FBQTtRQUNqQyxZQUFZLENBQUMsSUFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDLFNBQVMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQyxLQUFLLEVBQUUsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFBO1FBQzFFLFlBQVksQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsTUFBTSxFQUFFLENBQUMsQ0FBQTtRQUVuQyxNQUFNLFFBQVEsR0FBYSxFQUFFLENBQUE7UUFDN0IsSUFBSSxJQUFJLENBQUMsY0FBYyxFQUFFO1lBQUUsUUFBUSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsY0FBYyxFQUFFLENBQUMsQ0FBQTtRQUMvRCxRQUFRLENBQUMsSUFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDLFdBQVcsQ0FBQyxZQUFZLENBQUMsQ0FBQyxDQUFBO1FBQ2hELElBQUksSUFBSSxDQUFDLFlBQVksRUFBRTtZQUFFLFFBQVEsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLFlBQVksRUFBRSxDQUFDLENBQUE7UUFFM0QsT0FBTyxRQUFRLENBQUMsSUFBSSxDQUFDLG1CQUFRLENBQUMsTUFBTSxDQUFDLENBQUE7SUFDdkMsQ0FBQztJQUVTLFdBQVcsQ0FBQyxTQUFtQjtRQUN2QyxPQUFPLFNBQVMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxRQUFRLEVBQUUsRUFBRSxDQUNoQyxRQUFRO2FBQ0wsS0FBSyxDQUFDLG1CQUFRLENBQUMsTUFBTSxDQUFDO2FBQ3RCLEdBQUcsQ0FBQyxDQUFDLEdBQUcsRUFBRSxFQUFFLENBQUMsS0FBSyxHQUFHLEVBQUUsQ0FBQzthQUN4QixJQUFJLENBQUMsbUJBQVEsQ0FBQyxNQUFNLENBQUMsQ0FDekIsQ0FBQTtJQUNILENBQUM7SUFFTSxXQUFXLENBQUMsU0FBcUI7UUFDdEMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLENBQUE7SUFDaEMsQ0FBQztJQUVNLGNBQWM7UUFDbkIsTUFBTSxRQUFRLEdBQWEsRUFBRSxDQUFBO1FBQzdCLFFBQVEsQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsVUFBVSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDLEtBQUssRUFBRSxDQUFDLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUE7UUFDdkUsT0FBTyxRQUFRLENBQUMsSUFBSSxDQUFDLG1CQUFRLENBQUMsTUFBTSxDQUFDLENBQUE7SUFDdkMsQ0FBQztDQUNGO0FBdkNELGdDQXVDQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFB1bWxSZWxhdGlvbiB9IGZyb20gJ3NyYy9zZXJ2aWNlL3ByaW50L3B1bWwvcHVtbC1yZWxhdGlvbidcbmltcG9ydCB7IGNvbnN0YW50IH0gZnJvbSAnc3JjL3V0aWwvY29uc3RhbnQnXG5cbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBQdW1sRW50aXR5IHtcbiAgcHJvdGVjdGVkIF9jaGlsZHJlbjogUHVtbEVudGl0eVtdID0gW11cbiAgcHJvdGVjdGVkIF9yZWxhdGlvbnM6IFB1bWxSZWxhdGlvbltdID0gW11cblxuICBwcm90ZWN0ZWQgYWJzdHJhY3QgX3RlbXBsYXRlRW5kKCk6IHN0cmluZ1xuICBwcm90ZWN0ZWQgYWJzdHJhY3QgX3RlbXBsYXRlU3RhcnQoKTogc3RyaW5nXG4gIHByb3RlY3RlZCBhYnN0cmFjdCBfcHJpbnQoKTogc3RyaW5nW11cblxuICBwdWJsaWMgcHJpbnQoKTogc3RyaW5nIHtcbiAgICBjb25zdCBib2R5VGVtcGxhdGU6IHN0cmluZ1tdID0gW11cbiAgICBib2R5VGVtcGxhdGUucHVzaCguLi50aGlzLl9jaGlsZHJlbi5tYXAoKGMpID0+IGMucHJpbnQoKSkuZmlsdGVyKEJvb2xlYW4pKVxuICAgIGJvZHlUZW1wbGF0ZS5wdXNoKC4uLnRoaXMuX3ByaW50KCkpXG5cbiAgICBjb25zdCB0ZW1wbGF0ZTogc3RyaW5nW10gPSBbXVxuICAgIGlmICh0aGlzLl90ZW1wbGF0ZVN0YXJ0KCkpIHRlbXBsYXRlLnB1c2godGhpcy5fdGVtcGxhdGVTdGFydCgpKVxuICAgIHRlbXBsYXRlLnB1c2goLi4udGhpcy5faW5kZW50Um93cyhib2R5VGVtcGxhdGUpKVxuICAgIGlmICh0aGlzLl90ZW1wbGF0ZUVuZCgpKSB0ZW1wbGF0ZS5wdXNoKHRoaXMuX3RlbXBsYXRlRW5kKCkpXG5cbiAgICByZXR1cm4gdGVtcGxhdGUuam9pbihjb25zdGFudC5uZXdSb3cpXG4gIH1cblxuICBwcm90ZWN0ZWQgX2luZGVudFJvd3ModGVtcGxhdGVzOiBzdHJpbmdbXSk6IHN0cmluZ1tdIHtcbiAgICByZXR1cm4gdGVtcGxhdGVzLm1hcCgodGVtcGxhdGUpID0+XG4gICAgICB0ZW1wbGF0ZVxuICAgICAgICAuc3BsaXQoY29uc3RhbnQubmV3Um93KVxuICAgICAgICAubWFwKChyb3cpID0+IGAgICR7cm93fWApXG4gICAgICAgIC5qb2luKGNvbnN0YW50Lm5ld1JvdylcbiAgICApXG4gIH1cblxuICBwdWJsaWMgYWRkQ2hpbGRyZW4ocHJpbnRhYmxlOiBQdW1sRW50aXR5KTogdm9pZCB7XG4gICAgdGhpcy5fY2hpbGRyZW4ucHVzaChwcmludGFibGUpXG4gIH1cblxuICBwdWJsaWMgcHJpbnRSZWxhdGlvbnMoKTogc3RyaW5nIHtcbiAgICBjb25zdCB0ZW1wbGF0ZTogc3RyaW5nW10gPSBbXVxuICAgIHRlbXBsYXRlLnB1c2goLi4udGhpcy5fcmVsYXRpb25zLm1hcCgocikgPT4gci5wcmludCgpKS5maWx0ZXIoQm9vbGVhbikpXG4gICAgcmV0dXJuIHRlbXBsYXRlLmpvaW4oY29uc3RhbnQubmV3Um93KVxuICB9XG59XG4iXX0=