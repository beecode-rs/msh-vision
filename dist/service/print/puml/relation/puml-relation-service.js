"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.pumlRelationService = void 0;
const puml_relation_1 = require("src/service/print/puml/relation/puml-relation");
exports.pumlRelationService = {
    generateRelations: (entities) => {
        return entities.map((entity) => exports.pumlRelationService._findRelations({ entity, entities })).flat();
    },
    _findRelations: ({ entity, entities }) => {
        return entity.importReferences
            .map((imp) => exports.pumlRelationService._findImportedExports({ imp, entities, entityId: entity.Id }))
            .flat();
    },
    _findImportedExports: ({ imp, entities, entityId, }) => {
        return entities.filter((ex) => ex.Id === imp.Id).map((ex) => new puml_relation_1.PumlRelation({ from: entityId, to: ex.Id }));
    },
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicHVtbC1yZWxhdGlvbi1zZXJ2aWNlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vc3JjL3NlcnZpY2UvcHJpbnQvcHVtbC9yZWxhdGlvbi9wdW1sLXJlbGF0aW9uLXNlcnZpY2UudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7O0FBR0EsaUZBQTRFO0FBRS9ELFFBQUEsbUJBQW1CLEdBQUc7SUFDakMsaUJBQWlCLEVBQUUsQ0FBQyxRQUFrQixFQUFlLEVBQUU7UUFDckQsT0FBTyxRQUFRLENBQUMsR0FBRyxDQUFDLENBQUMsTUFBTSxFQUFFLEVBQUUsQ0FBQywyQkFBbUIsQ0FBQyxjQUFjLENBQUMsRUFBRSxNQUFNLEVBQUUsUUFBUSxFQUFFLENBQUMsQ0FBQyxDQUFDLElBQUksRUFBRSxDQUFBO0lBQ2xHLENBQUM7SUFDRCxjQUFjLEVBQUUsQ0FBQyxFQUFFLE1BQU0sRUFBRSxRQUFRLEVBQTBDLEVBQWtCLEVBQUU7UUFDL0YsT0FBTyxNQUFNLENBQUMsZ0JBQWdCO2FBQzNCLEdBQUcsQ0FBQyxDQUFDLEdBQUcsRUFBRSxFQUFFLENBQUMsMkJBQW1CLENBQUMsb0JBQW9CLENBQUMsRUFBRSxHQUFHLEVBQUUsUUFBUSxFQUFFLFFBQVEsRUFBRSxNQUFNLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQzthQUM5RixJQUFJLEVBQUUsQ0FBQTtJQUNYLENBQUM7SUFDRCxvQkFBb0IsRUFBRSxDQUFDLEVBQ3JCLEdBQUcsRUFDSCxRQUFRLEVBQ1IsUUFBUSxHQUtULEVBQWtCLEVBQUU7UUFDbkIsT0FBTyxRQUFRLENBQUMsTUFBTSxDQUFDLENBQUMsRUFBRSxFQUFFLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxLQUFLLEdBQUcsQ0FBQyxFQUFFLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFLEVBQUUsRUFBRSxDQUFDLElBQUksNEJBQVksQ0FBQyxFQUFFLElBQUksRUFBRSxRQUFRLEVBQUUsRUFBRSxFQUFFLEVBQUUsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUE7SUFDL0csQ0FBQztDQUNGLENBQUEiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBFbnRpdHkgfSBmcm9tICdzcmMvbW9kZWwvZW50aXR5J1xuaW1wb3J0IHsgSW1wb3J0UmVmZXJlbmNlIH0gZnJvbSAnc3JjL21vZGVsL2ltcG9ydC1yZWZlcmVuY2UnXG5pbXBvcnQgeyBQcmludGFibGUgfSBmcm9tICdzcmMvc2VydmljZS9wcmludC9wcmludGFibGUnXG5pbXBvcnQgeyBQdW1sUmVsYXRpb24gfSBmcm9tICdzcmMvc2VydmljZS9wcmludC9wdW1sL3JlbGF0aW9uL3B1bWwtcmVsYXRpb24nXG5cbmV4cG9ydCBjb25zdCBwdW1sUmVsYXRpb25TZXJ2aWNlID0ge1xuICBnZW5lcmF0ZVJlbGF0aW9uczogKGVudGl0aWVzOiBFbnRpdHlbXSk6IFByaW50YWJsZVtdID0+IHtcbiAgICByZXR1cm4gZW50aXRpZXMubWFwKChlbnRpdHkpID0+IHB1bWxSZWxhdGlvblNlcnZpY2UuX2ZpbmRSZWxhdGlvbnMoeyBlbnRpdHksIGVudGl0aWVzIH0pKS5mbGF0KClcbiAgfSxcbiAgX2ZpbmRSZWxhdGlvbnM6ICh7IGVudGl0eSwgZW50aXRpZXMgfTogeyBlbnRpdHk6IEVudGl0eTsgZW50aXRpZXM6IEVudGl0eVtdIH0pOiBQdW1sUmVsYXRpb25bXSA9PiB7XG4gICAgcmV0dXJuIGVudGl0eS5pbXBvcnRSZWZlcmVuY2VzXG4gICAgICAubWFwKChpbXApID0+IHB1bWxSZWxhdGlvblNlcnZpY2UuX2ZpbmRJbXBvcnRlZEV4cG9ydHMoeyBpbXAsIGVudGl0aWVzLCBlbnRpdHlJZDogZW50aXR5LklkIH0pKVxuICAgICAgLmZsYXQoKVxuICB9LFxuICBfZmluZEltcG9ydGVkRXhwb3J0czogKHtcbiAgICBpbXAsXG4gICAgZW50aXRpZXMsXG4gICAgZW50aXR5SWQsXG4gIH06IHtcbiAgICBpbXA6IEltcG9ydFJlZmVyZW5jZVxuICAgIGVudGl0aWVzOiBFbnRpdHlbXVxuICAgIGVudGl0eUlkOiBzdHJpbmdcbiAgfSk6IFB1bWxSZWxhdGlvbltdID0+IHtcbiAgICByZXR1cm4gZW50aXRpZXMuZmlsdGVyKChleCkgPT4gZXguSWQgPT09IGltcC5JZCkubWFwKChleCkgPT4gbmV3IFB1bWxSZWxhdGlvbih7IGZyb206IGVudGl0eUlkLCB0bzogZXguSWQgfSkpXG4gIH0sXG59XG4iXX0=