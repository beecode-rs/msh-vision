"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.pumlRelationService = void 0;
const puml_relation_1 = require("src/service/print/puml/relation/puml-relation");
exports.pumlRelationService = {
    generateRelations: (entities) => {
        return entities.map((entity) => exports.pumlRelationService._findRelations({ entity, entities })).flat();
    },
    _findRelations: ({ entity, entities }) => {
        return entity.importReference
            .map((imp) => exports.pumlRelationService._findImportedExports({ imp, entities, entityId: entity.Id }))
            .flat();
    },
    _findImportedExports: ({ imp, entities, entityId, }) => {
        return entities.filter((ex) => ex.Id === imp.Id).map((ex) => new puml_relation_1.PumlRelation({ from: entityId, to: ex.Id }));
    },
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicHVtbC1yZWxhdGlvbi1zZXJ2aWNlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vc3JjL3NlcnZpY2UvcHJpbnQvcHVtbC9yZWxhdGlvbi9wdW1sLXJlbGF0aW9uLXNlcnZpY2UudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7O0FBR0EsaUZBQTRFO0FBRS9ELFFBQUEsbUJBQW1CLEdBQUc7SUFDakMsaUJBQWlCLEVBQUUsQ0FBQyxRQUFrQixFQUFlLEVBQUU7UUFDckQsT0FBTyxRQUFRLENBQUMsR0FBRyxDQUFDLENBQUMsTUFBTSxFQUFFLEVBQUUsQ0FBQywyQkFBbUIsQ0FBQyxjQUFjLENBQUMsRUFBRSxNQUFNLEVBQUUsUUFBUSxFQUFFLENBQUMsQ0FBQyxDQUFDLElBQUksRUFBRSxDQUFBO0lBQ2xHLENBQUM7SUFDRCxjQUFjLEVBQUUsQ0FBQyxFQUFFLE1BQU0sRUFBRSxRQUFRLEVBQTBDLEVBQWtCLEVBQUU7UUFDL0YsT0FBTyxNQUFNLENBQUMsZUFBZTthQUMxQixHQUFHLENBQUMsQ0FBQyxHQUFHLEVBQUUsRUFBRSxDQUFDLDJCQUFtQixDQUFDLG9CQUFvQixDQUFDLEVBQUUsR0FBRyxFQUFFLFFBQVEsRUFBRSxRQUFRLEVBQUUsTUFBTSxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUM7YUFDOUYsSUFBSSxFQUFFLENBQUE7SUFDWCxDQUFDO0lBQ0Qsb0JBQW9CLEVBQUUsQ0FBQyxFQUNyQixHQUFHLEVBQ0gsUUFBUSxFQUNSLFFBQVEsR0FLVCxFQUFrQixFQUFFO1FBQ25CLE9BQU8sUUFBUSxDQUFDLE1BQU0sQ0FBQyxDQUFDLEVBQUUsRUFBRSxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsS0FBSyxHQUFHLENBQUMsRUFBRSxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRSxFQUFFLEVBQUUsQ0FBQyxJQUFJLDRCQUFZLENBQUMsRUFBRSxJQUFJLEVBQUUsUUFBUSxFQUFFLEVBQUUsRUFBRSxFQUFFLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFBO0lBQy9HLENBQUM7Q0FDRixDQUFBIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRW50aXR5IH0gZnJvbSAnc3JjL21vZGVsL2VudGl0eSdcbmltcG9ydCB7IEltcG9ydFJlZmVyZW5jZSB9IGZyb20gJ3NyYy9tb2RlbC9pbXBvcnQtcmVmZXJlbmNlJ1xuaW1wb3J0IHsgUHJpbnRhYmxlIH0gZnJvbSAnc3JjL3NlcnZpY2UvcHJpbnQvcHJpbnRhYmxlJ1xuaW1wb3J0IHsgUHVtbFJlbGF0aW9uIH0gZnJvbSAnc3JjL3NlcnZpY2UvcHJpbnQvcHVtbC9yZWxhdGlvbi9wdW1sLXJlbGF0aW9uJ1xuXG5leHBvcnQgY29uc3QgcHVtbFJlbGF0aW9uU2VydmljZSA9IHtcbiAgZ2VuZXJhdGVSZWxhdGlvbnM6IChlbnRpdGllczogRW50aXR5W10pOiBQcmludGFibGVbXSA9PiB7XG4gICAgcmV0dXJuIGVudGl0aWVzLm1hcCgoZW50aXR5KSA9PiBwdW1sUmVsYXRpb25TZXJ2aWNlLl9maW5kUmVsYXRpb25zKHsgZW50aXR5LCBlbnRpdGllcyB9KSkuZmxhdCgpXG4gIH0sXG4gIF9maW5kUmVsYXRpb25zOiAoeyBlbnRpdHksIGVudGl0aWVzIH06IHsgZW50aXR5OiBFbnRpdHk7IGVudGl0aWVzOiBFbnRpdHlbXSB9KTogUHVtbFJlbGF0aW9uW10gPT4ge1xuICAgIHJldHVybiBlbnRpdHkuaW1wb3J0UmVmZXJlbmNlXG4gICAgICAubWFwKChpbXApID0+IHB1bWxSZWxhdGlvblNlcnZpY2UuX2ZpbmRJbXBvcnRlZEV4cG9ydHMoeyBpbXAsIGVudGl0aWVzLCBlbnRpdHlJZDogZW50aXR5LklkIH0pKVxuICAgICAgLmZsYXQoKVxuICB9LFxuICBfZmluZEltcG9ydGVkRXhwb3J0czogKHtcbiAgICBpbXAsXG4gICAgZW50aXRpZXMsXG4gICAgZW50aXR5SWQsXG4gIH06IHtcbiAgICBpbXA6IEltcG9ydFJlZmVyZW5jZVxuICAgIGVudGl0aWVzOiBFbnRpdHlbXVxuICAgIGVudGl0eUlkOiBzdHJpbmdcbiAgfSk6IFB1bWxSZWxhdGlvbltdID0+IHtcbiAgICByZXR1cm4gZW50aXRpZXMuZmlsdGVyKChleCkgPT4gZXguSWQgPT09IGltcC5JZCkubWFwKChleCkgPT4gbmV3IFB1bWxSZWxhdGlvbih7IGZyb206IGVudGl0eUlkLCB0bzogZXguSWQgfSkpXG4gIH0sXG59XG4iXX0=