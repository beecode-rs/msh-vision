"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.PumlPrintableClass = void 0;
const property_1 = require("src/model/property");
const puml_printable_property_1 = require("src/service/print/puml/printable-entity/puml-printable-property");
const puml_entity_1 = require("src/service/print/puml/puml-entity");
const puml_relation_1 = require("src/service/print/puml/puml-relation");
class PumlPrintableClass extends puml_entity_1.PumlEntity {
    constructor(params) {
        const { entity } = params;
        super();
        this._entity = entity;
        this._relations = entity.Meta.References.map((r) => new puml_relation_1.PumlRelation({ reference: r, fromEntity: entity }));
    }
    _templateEnd() {
        return '}';
    }
    _templateStart() {
        return `${this._entity.Meta.IsAbstract ? 'abstract' : 'class'} "${this._entity.Name}" as ${this._entity.Id} {`;
    }
    _print() {
        return this._entity.Meta.Properties.sort(property_1.Property.SortByName)
            .map((p) => this._printProperty(p))
            .filter(Boolean);
    }
    _printProperty(property) {
        return new puml_printable_property_1.PumlPrintableProperty({ property }).print();
    }
}
exports.PumlPrintableClass = PumlPrintableClass;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicHVtbC1wcmludGFibGUtY2xhc3MuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi9zcmMvc2VydmljZS9wcmludC9wdW1sL3ByaW50YWJsZS1lbnRpdHkvcHVtbC1wcmludGFibGUtY2xhc3MudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7O0FBRUEsaURBQTZDO0FBQzdDLDZHQUF1RztBQUN2RyxvRUFBK0Q7QUFDL0Qsd0VBQW1FO0FBRW5FLE1BQWEsa0JBQW1CLFNBQVEsd0JBQVU7SUFVaEQsWUFBWSxNQUF1QztRQUNqRCxNQUFNLEVBQUUsTUFBTSxFQUFFLEdBQUcsTUFBTSxDQUFBO1FBQ3pCLEtBQUssRUFBRSxDQUFBO1FBQ1AsSUFBSSxDQUFDLE9BQU8sR0FBRyxNQUFNLENBQUE7UUFDckIsSUFBSSxDQUFDLFVBQVUsR0FBRyxNQUFNLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLElBQUksNEJBQVksQ0FBQyxFQUFFLFNBQVMsRUFBRSxDQUFDLEVBQUUsVUFBVSxFQUFFLE1BQU0sRUFBRSxDQUFDLENBQUMsQ0FBQTtJQUM3RyxDQUFDO0lBWlMsWUFBWTtRQUNwQixPQUFPLEdBQUcsQ0FBQTtJQUNaLENBQUM7SUFDUyxjQUFjO1FBQ3RCLE9BQU8sR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUMsT0FBTyxLQUFLLElBQUksQ0FBQyxPQUFPLENBQUMsSUFBSSxRQUFRLElBQUksQ0FBQyxPQUFPLENBQUMsRUFBRSxJQUFJLENBQUE7SUFDaEgsQ0FBQztJQVNTLE1BQU07UUFDZCxPQUFPLElBQUksQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsbUJBQVEsQ0FBQyxVQUFVLENBQUM7YUFDMUQsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxJQUFJLENBQUMsY0FBYyxDQUFDLENBQUMsQ0FBQyxDQUFDO2FBQ2xDLE1BQU0sQ0FBQyxPQUFPLENBQUMsQ0FBQTtJQUNwQixDQUFDO0lBRVMsY0FBYyxDQUFDLFFBQWtCO1FBQ3pDLE9BQU8sSUFBSSwrQ0FBcUIsQ0FBQyxFQUFFLFFBQVEsRUFBRSxDQUFDLENBQUMsS0FBSyxFQUFFLENBQUE7SUFDeEQsQ0FBQztDQUNGO0FBMUJELGdEQTBCQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEVudGl0eSB9IGZyb20gJ3NyYy9tb2RlbC9lbnRpdHknXG5pbXBvcnQgeyBFbnRpdHlDbGFzcyB9IGZyb20gJ3NyYy9tb2RlbC9lbnRpdHktY2xhc3MnXG5pbXBvcnQgeyBQcm9wZXJ0eSB9IGZyb20gJ3NyYy9tb2RlbC9wcm9wZXJ0eSdcbmltcG9ydCB7IFB1bWxQcmludGFibGVQcm9wZXJ0eSB9IGZyb20gJ3NyYy9zZXJ2aWNlL3ByaW50L3B1bWwvcHJpbnRhYmxlLWVudGl0eS9wdW1sLXByaW50YWJsZS1wcm9wZXJ0eSdcbmltcG9ydCB7IFB1bWxFbnRpdHkgfSBmcm9tICdzcmMvc2VydmljZS9wcmludC9wdW1sL3B1bWwtZW50aXR5J1xuaW1wb3J0IHsgUHVtbFJlbGF0aW9uIH0gZnJvbSAnc3JjL3NlcnZpY2UvcHJpbnQvcHVtbC9wdW1sLXJlbGF0aW9uJ1xuXG5leHBvcnQgY2xhc3MgUHVtbFByaW50YWJsZUNsYXNzIGV4dGVuZHMgUHVtbEVudGl0eSB7XG4gIHByb3RlY3RlZCByZWFkb25seSBfZW50aXR5OiBFbnRpdHk8RW50aXR5Q2xhc3M+XG5cbiAgcHJvdGVjdGVkIF90ZW1wbGF0ZUVuZCgpOiBzdHJpbmcge1xuICAgIHJldHVybiAnfSdcbiAgfVxuICBwcm90ZWN0ZWQgX3RlbXBsYXRlU3RhcnQoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gYCR7dGhpcy5fZW50aXR5Lk1ldGEuSXNBYnN0cmFjdCA/ICdhYnN0cmFjdCcgOiAnY2xhc3MnfSBcIiR7dGhpcy5fZW50aXR5Lk5hbWV9XCIgYXMgJHt0aGlzLl9lbnRpdHkuSWR9IHtgXG4gIH1cblxuICBjb25zdHJ1Y3RvcihwYXJhbXM6IHsgZW50aXR5OiBFbnRpdHk8RW50aXR5Q2xhc3M+IH0pIHtcbiAgICBjb25zdCB7IGVudGl0eSB9ID0gcGFyYW1zXG4gICAgc3VwZXIoKVxuICAgIHRoaXMuX2VudGl0eSA9IGVudGl0eVxuICAgIHRoaXMuX3JlbGF0aW9ucyA9IGVudGl0eS5NZXRhLlJlZmVyZW5jZXMubWFwKChyKSA9PiBuZXcgUHVtbFJlbGF0aW9uKHsgcmVmZXJlbmNlOiByLCBmcm9tRW50aXR5OiBlbnRpdHkgfSkpXG4gIH1cblxuICBwcm90ZWN0ZWQgX3ByaW50KCk6IHN0cmluZ1tdIHtcbiAgICByZXR1cm4gdGhpcy5fZW50aXR5Lk1ldGEuUHJvcGVydGllcy5zb3J0KFByb3BlcnR5LlNvcnRCeU5hbWUpXG4gICAgICAubWFwKChwKSA9PiB0aGlzLl9wcmludFByb3BlcnR5KHApKVxuICAgICAgLmZpbHRlcihCb29sZWFuKVxuICB9XG5cbiAgcHJvdGVjdGVkIF9wcmludFByb3BlcnR5KHByb3BlcnR5OiBQcm9wZXJ0eSk6IHN0cmluZyB7XG4gICAgcmV0dXJuIG5ldyBQdW1sUHJpbnRhYmxlUHJvcGVydHkoeyBwcm9wZXJ0eSB9KS5wcmludCgpXG4gIH1cbn1cbiJdfQ==