"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.PumlPrintableClass = void 0;
const property_1 = require("src/model/property");
const puml_printable_property_1 = require("src/service/print/puml/printable-entity/puml-printable-property");
const puml_entity_1 = require("src/service/print/puml/puml-entity");
const puml_relation_1 = require("src/service/print/puml/puml-relation");
class PumlPrintableClass extends puml_entity_1.PumlEntity {
    constructor(params) {
        const { entity } = params;
        super();
        this._entity = entity;
        this._relations = entity.References.map((r) => new puml_relation_1.PumlRelation({ reference: r, fromEntity: entity }));
    }
    _templateEnd() {
        return '}';
    }
    _templateStart() {
        return `${this._entity.Meta.IsAbstract ? 'abstract' : 'class'} "${this._entity.Name}" as ${this._entity.Id} {`;
    }
    _print() {
        return this._entity.Meta.Properties.sort(property_1.Property.SortByName)
            .map((p) => this._printProperty(p))
            .filter(Boolean);
    }
    _printProperty(property) {
        return new puml_printable_property_1.PumlPrintableProperty({ property }).print();
    }
}
exports.PumlPrintableClass = PumlPrintableClass;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicHVtbC1wcmludGFibGUtY2xhc3MuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi9zcmMvc2VydmljZS9wcmludC9wdW1sL3ByaW50YWJsZS1lbnRpdHkvcHVtbC1wcmludGFibGUtY2xhc3MudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7O0FBRUEsaURBQTZDO0FBQzdDLDZHQUF1RztBQUN2RyxvRUFBK0Q7QUFDL0Qsd0VBQW1FO0FBRW5FLE1BQWEsa0JBQW1CLFNBQVEsd0JBQVU7SUFVaEQsWUFBWSxNQUF1QztRQUNqRCxNQUFNLEVBQUUsTUFBTSxFQUFFLEdBQUcsTUFBTSxDQUFBO1FBQ3pCLEtBQUssRUFBRSxDQUFBO1FBQ1AsSUFBSSxDQUFDLE9BQU8sR0FBRyxNQUFNLENBQUE7UUFDckIsSUFBSSxDQUFDLFVBQVUsR0FBRyxNQUFNLENBQUMsVUFBVSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsSUFBSSw0QkFBWSxDQUFDLEVBQUUsU0FBUyxFQUFFLENBQUMsRUFBRSxVQUFVLEVBQUUsTUFBTSxFQUFFLENBQUMsQ0FBQyxDQUFBO0lBQ3hHLENBQUM7SUFaUyxZQUFZO1FBQ3BCLE9BQU8sR0FBRyxDQUFBO0lBQ1osQ0FBQztJQUNTLGNBQWM7UUFDdEIsT0FBTyxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxPQUFPLEtBQUssSUFBSSxDQUFDLE9BQU8sQ0FBQyxJQUFJLFFBQVEsSUFBSSxDQUFDLE9BQU8sQ0FBQyxFQUFFLElBQUksQ0FBQTtJQUNoSCxDQUFDO0lBU1MsTUFBTTtRQUNkLE9BQU8sSUFBSSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxtQkFBUSxDQUFDLFVBQVUsQ0FBQzthQUMxRCxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLElBQUksQ0FBQyxjQUFjLENBQUMsQ0FBQyxDQUFDLENBQUM7YUFDbEMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxDQUFBO0lBQ3BCLENBQUM7SUFFUyxjQUFjLENBQUMsUUFBa0I7UUFDekMsT0FBTyxJQUFJLCtDQUFxQixDQUFDLEVBQUUsUUFBUSxFQUFFLENBQUMsQ0FBQyxLQUFLLEVBQUUsQ0FBQTtJQUN4RCxDQUFDO0NBQ0Y7QUExQkQsZ0RBMEJDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRW50aXR5IH0gZnJvbSAnc3JjL21vZGVsL2VudGl0eSdcbmltcG9ydCB7IEVudGl0eUNsYXNzIH0gZnJvbSAnc3JjL21vZGVsL2VudGl0eS1jbGFzcydcbmltcG9ydCB7IFByb3BlcnR5IH0gZnJvbSAnc3JjL21vZGVsL3Byb3BlcnR5J1xuaW1wb3J0IHsgUHVtbFByaW50YWJsZVByb3BlcnR5IH0gZnJvbSAnc3JjL3NlcnZpY2UvcHJpbnQvcHVtbC9wcmludGFibGUtZW50aXR5L3B1bWwtcHJpbnRhYmxlLXByb3BlcnR5J1xuaW1wb3J0IHsgUHVtbEVudGl0eSB9IGZyb20gJ3NyYy9zZXJ2aWNlL3ByaW50L3B1bWwvcHVtbC1lbnRpdHknXG5pbXBvcnQgeyBQdW1sUmVsYXRpb24gfSBmcm9tICdzcmMvc2VydmljZS9wcmludC9wdW1sL3B1bWwtcmVsYXRpb24nXG5cbmV4cG9ydCBjbGFzcyBQdW1sUHJpbnRhYmxlQ2xhc3MgZXh0ZW5kcyBQdW1sRW50aXR5IHtcbiAgcHJvdGVjdGVkIHJlYWRvbmx5IF9lbnRpdHk6IEVudGl0eTxFbnRpdHlDbGFzcz5cblxuICBwcm90ZWN0ZWQgX3RlbXBsYXRlRW5kKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuICd9J1xuICB9XG4gIHByb3RlY3RlZCBfdGVtcGxhdGVTdGFydCgpOiBzdHJpbmcge1xuICAgIHJldHVybiBgJHt0aGlzLl9lbnRpdHkuTWV0YS5Jc0Fic3RyYWN0ID8gJ2Fic3RyYWN0JyA6ICdjbGFzcyd9IFwiJHt0aGlzLl9lbnRpdHkuTmFtZX1cIiBhcyAke3RoaXMuX2VudGl0eS5JZH0ge2BcbiAgfVxuXG4gIGNvbnN0cnVjdG9yKHBhcmFtczogeyBlbnRpdHk6IEVudGl0eTxFbnRpdHlDbGFzcz4gfSkge1xuICAgIGNvbnN0IHsgZW50aXR5IH0gPSBwYXJhbXNcbiAgICBzdXBlcigpXG4gICAgdGhpcy5fZW50aXR5ID0gZW50aXR5XG4gICAgdGhpcy5fcmVsYXRpb25zID0gZW50aXR5LlJlZmVyZW5jZXMubWFwKChyKSA9PiBuZXcgUHVtbFJlbGF0aW9uKHsgcmVmZXJlbmNlOiByLCBmcm9tRW50aXR5OiBlbnRpdHkgfSkpXG4gIH1cblxuICBwcm90ZWN0ZWQgX3ByaW50KCk6IHN0cmluZ1tdIHtcbiAgICByZXR1cm4gdGhpcy5fZW50aXR5Lk1ldGEuUHJvcGVydGllcy5zb3J0KFByb3BlcnR5LlNvcnRCeU5hbWUpXG4gICAgICAubWFwKChwKSA9PiB0aGlzLl9wcmludFByb3BlcnR5KHApKVxuICAgICAgLmZpbHRlcihCb29sZWFuKVxuICB9XG5cbiAgcHJvdGVjdGVkIF9wcmludFByb3BlcnR5KHByb3BlcnR5OiBQcm9wZXJ0eSk6IHN0cmluZyB7XG4gICAgcmV0dXJuIG5ldyBQdW1sUHJpbnRhYmxlUHJvcGVydHkoeyBwcm9wZXJ0eSB9KS5wcmludCgpXG4gIH1cbn1cbiJdfQ==