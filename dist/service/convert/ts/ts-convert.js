"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.TsConvert = void 0;
const ts_entity_service_1 = require("src/service/convert/ts/ts-entity-service");
const ts_service_1 = require("src/service/convert/ts/ts-service");
const file_service_1 = require("src/service/file-service");
class TsConvert {
    constructor({ filePath, folderPath }) {
        this._filePath = filePath;
        this._folderPath = folderPath;
    }
    async convert() {
        const filePath = file_service_1.fileService.joinPaths(this._folderPath, this._filePath);
        const fileName = file_service_1.fileService.fileNameFromPath(filePath, { withExtension: true });
        const node = await ts_service_1.tsService.parseFile(filePath);
        const diagramFilePath = file_service_1.fileService.cleanupPath(this._filePath);
        return ts_entity_service_1.tsEntityService.extractEntities({ node, fileName, filePath: diagramFilePath });
    }
}
exports.TsConvert = TsConvert;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidHMtY29udmVydC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3NyYy9zZXJ2aWNlL2NvbnZlcnQvdHMvdHMtY29udmVydC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7QUFFQSxnRkFBMEU7QUFDMUUsa0VBQTZEO0FBQzdELDJEQUFzRDtBQUV0RCxNQUFhLFNBQVM7SUFJcEIsWUFBWSxFQUFFLFFBQVEsRUFBRSxVQUFVLEVBQTRDO1FBQzVFLElBQUksQ0FBQyxTQUFTLEdBQUcsUUFBUSxDQUFBO1FBQ3pCLElBQUksQ0FBQyxXQUFXLEdBQUcsVUFBVSxDQUFBO0lBQy9CLENBQUM7SUFFTSxLQUFLLENBQUMsT0FBTztRQUNsQixNQUFNLFFBQVEsR0FBRywwQkFBVyxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsV0FBVyxFQUFFLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQTtRQUN4RSxNQUFNLFFBQVEsR0FBRywwQkFBVyxDQUFDLGdCQUFnQixDQUFDLFFBQVEsRUFBRSxFQUFFLGFBQWEsRUFBRSxJQUFJLEVBQUUsQ0FBQyxDQUFBO1FBQ2hGLE1BQU0sSUFBSSxHQUFHLE1BQU0sc0JBQVMsQ0FBQyxTQUFTLENBQUMsUUFBUSxDQUFDLENBQUE7UUFDaEQsTUFBTSxlQUFlLEdBQUcsMEJBQVcsQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFBO1FBQy9ELE9BQU8sbUNBQWUsQ0FBQyxlQUFlLENBQUMsRUFBRSxJQUFJLEVBQUUsUUFBUSxFQUFFLFFBQVEsRUFBRSxlQUFlLEVBQUUsQ0FBQyxDQUFBO0lBQ3ZGLENBQUM7Q0FDRjtBQWhCRCw4QkFnQkMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBFbnRpdHkgfSBmcm9tICdzcmMvbW9kZWwvZW50aXR5J1xuaW1wb3J0IHsgQ29udmVydFN0cmF0ZWd5IH0gZnJvbSAnc3JjL3NlcnZpY2UvY29udmVydC9jb252ZXJ0LXN0cmF0ZWd5J1xuaW1wb3J0IHsgdHNFbnRpdHlTZXJ2aWNlIH0gZnJvbSAnc3JjL3NlcnZpY2UvY29udmVydC90cy90cy1lbnRpdHktc2VydmljZSdcbmltcG9ydCB7IHRzU2VydmljZSB9IGZyb20gJ3NyYy9zZXJ2aWNlL2NvbnZlcnQvdHMvdHMtc2VydmljZSdcbmltcG9ydCB7IGZpbGVTZXJ2aWNlIH0gZnJvbSAnc3JjL3NlcnZpY2UvZmlsZS1zZXJ2aWNlJ1xuXG5leHBvcnQgY2xhc3MgVHNDb252ZXJ0IGltcGxlbWVudHMgQ29udmVydFN0cmF0ZWd5IHtcbiAgcHJvdGVjdGVkIHJlYWRvbmx5IF9maWxlUGF0aDogc3RyaW5nXG4gIHByb3RlY3RlZCByZWFkb25seSBfZm9sZGVyUGF0aDogc3RyaW5nXG5cbiAgY29uc3RydWN0b3IoeyBmaWxlUGF0aCwgZm9sZGVyUGF0aCB9OiB7IGZpbGVQYXRoOiBzdHJpbmc7IGZvbGRlclBhdGg6IHN0cmluZyB9KSB7XG4gICAgdGhpcy5fZmlsZVBhdGggPSBmaWxlUGF0aFxuICAgIHRoaXMuX2ZvbGRlclBhdGggPSBmb2xkZXJQYXRoXG4gIH1cblxuICBwdWJsaWMgYXN5bmMgY29udmVydCgpOiBQcm9taXNlPEVudGl0eVtdPiB7XG4gICAgY29uc3QgZmlsZVBhdGggPSBmaWxlU2VydmljZS5qb2luUGF0aHModGhpcy5fZm9sZGVyUGF0aCwgdGhpcy5fZmlsZVBhdGgpXG4gICAgY29uc3QgZmlsZU5hbWUgPSBmaWxlU2VydmljZS5maWxlTmFtZUZyb21QYXRoKGZpbGVQYXRoLCB7IHdpdGhFeHRlbnNpb246IHRydWUgfSlcbiAgICBjb25zdCBub2RlID0gYXdhaXQgdHNTZXJ2aWNlLnBhcnNlRmlsZShmaWxlUGF0aClcbiAgICBjb25zdCBkaWFncmFtRmlsZVBhdGggPSBmaWxlU2VydmljZS5jbGVhbnVwUGF0aCh0aGlzLl9maWxlUGF0aClcbiAgICByZXR1cm4gdHNFbnRpdHlTZXJ2aWNlLmV4dHJhY3RFbnRpdGllcyh7IG5vZGUsIGZpbGVOYW1lLCBmaWxlUGF0aDogZGlhZ3JhbUZpbGVQYXRoIH0pXG4gIH1cbn1cbiJdfQ==