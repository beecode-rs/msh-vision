"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.TypescriptConvertStrategy = void 0;
const entity_1 = require("src/model/entity");
const export_extractor_1 = require("src/service/convert/typescripty/export-extractor");
const import_extractor_1 = require("src/service/convert/typescripty/import-extractor");
const typescript_parser_1 = require("typescript-parser");
const parser = new typescript_parser_1.TypescriptParser();
class TypescriptConvertStrategy {
    constructor(_filePath, _rootPath = 'workspace root') {
        this._filePath = _filePath;
        this._rootPath = _rootPath;
    }
    async convert() {
        const parsedResult = await parser.parseFile(this._filePath, this._rootPath);
        // TODO extract entity from parsed result
        const entity = new entity_1.Entity({ filePath: this._filePath });
        entity.importReference.push(...import_extractor_1.importExtractor.extract(parsedResult));
        entity.exportReference.push(...export_extractor_1.exportExtractor.extract(parsedResult));
        return [entity];
    }
}
exports.TypescriptConvertStrategy = TypescriptConvertStrategy;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidHlwZXNjcmlwdC1jb252ZXJ0LXN0cmF0ZWd5LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vc3JjL3NlcnZpY2UvY29udmVydC90eXBlc2NyaXB0eS90eXBlc2NyaXB0LWNvbnZlcnQtc3RyYXRlZ3kudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7O0FBQUEsNkNBQXlDO0FBRXpDLHVGQUFrRjtBQUNsRix1RkFBa0Y7QUFDbEYseURBQW9EO0FBRXBELE1BQU0sTUFBTSxHQUFHLElBQUksb0NBQWdCLEVBQUUsQ0FBQTtBQUVyQyxNQUFhLHlCQUF5QjtJQUNwQyxZQUErQixTQUFpQixFQUFxQixZQUFZLGdCQUFnQjtRQUFsRSxjQUFTLEdBQVQsU0FBUyxDQUFRO1FBQXFCLGNBQVMsR0FBVCxTQUFTLENBQW1CO0lBQUcsQ0FBQztJQUU5RixLQUFLLENBQUMsT0FBTztRQUNsQixNQUFNLFlBQVksR0FBRyxNQUFNLE1BQU0sQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLFNBQVMsRUFBRSxJQUFJLENBQUMsU0FBUyxDQUFDLENBQUE7UUFFM0UseUNBQXlDO1FBQ3pDLE1BQU0sTUFBTSxHQUFHLElBQUksZUFBTSxDQUFDLEVBQUUsUUFBUSxFQUFFLElBQUksQ0FBQyxTQUFTLEVBQUUsQ0FBQyxDQUFBO1FBRXZELE1BQU0sQ0FBQyxlQUFlLENBQUMsSUFBSSxDQUFDLEdBQUcsa0NBQWUsQ0FBQyxPQUFPLENBQUMsWUFBWSxDQUFDLENBQUMsQ0FBQTtRQUNyRSxNQUFNLENBQUMsZUFBZSxDQUFDLElBQUksQ0FBQyxHQUFHLGtDQUFlLENBQUMsT0FBTyxDQUFDLFlBQVksQ0FBQyxDQUFDLENBQUE7UUFFckUsT0FBTyxDQUFDLE1BQU0sQ0FBQyxDQUFBO0lBQ2pCLENBQUM7Q0FDRjtBQWRELDhEQWNDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRW50aXR5IH0gZnJvbSAnc3JjL21vZGVsL2VudGl0eSdcbmltcG9ydCB7IENvbnZlcnRTdHJhdGVneSB9IGZyb20gJ3NyYy9zZXJ2aWNlL2NvbnZlcnQvY29udmVydC1zdHJhdGVneSdcbmltcG9ydCB7IGV4cG9ydEV4dHJhY3RvciB9IGZyb20gJ3NyYy9zZXJ2aWNlL2NvbnZlcnQvdHlwZXNjcmlwdHkvZXhwb3J0LWV4dHJhY3RvcidcbmltcG9ydCB7IGltcG9ydEV4dHJhY3RvciB9IGZyb20gJ3NyYy9zZXJ2aWNlL2NvbnZlcnQvdHlwZXNjcmlwdHkvaW1wb3J0LWV4dHJhY3RvcidcbmltcG9ydCB7IFR5cGVzY3JpcHRQYXJzZXIgfSBmcm9tICd0eXBlc2NyaXB0LXBhcnNlcidcblxuY29uc3QgcGFyc2VyID0gbmV3IFR5cGVzY3JpcHRQYXJzZXIoKVxuXG5leHBvcnQgY2xhc3MgVHlwZXNjcmlwdENvbnZlcnRTdHJhdGVneSBpbXBsZW1lbnRzIENvbnZlcnRTdHJhdGVneSB7XG4gIGNvbnN0cnVjdG9yKHByb3RlY3RlZCByZWFkb25seSBfZmlsZVBhdGg6IHN0cmluZywgcHJvdGVjdGVkIHJlYWRvbmx5IF9yb290UGF0aCA9ICd3b3Jrc3BhY2Ugcm9vdCcpIHt9XG5cbiAgcHVibGljIGFzeW5jIGNvbnZlcnQoKTogUHJvbWlzZTxFbnRpdHlbXT4ge1xuICAgIGNvbnN0IHBhcnNlZFJlc3VsdCA9IGF3YWl0IHBhcnNlci5wYXJzZUZpbGUodGhpcy5fZmlsZVBhdGgsIHRoaXMuX3Jvb3RQYXRoKVxuXG4gICAgLy8gVE9ETyBleHRyYWN0IGVudGl0eSBmcm9tIHBhcnNlZCByZXN1bHRcbiAgICBjb25zdCBlbnRpdHkgPSBuZXcgRW50aXR5KHsgZmlsZVBhdGg6IHRoaXMuX2ZpbGVQYXRoIH0pXG5cbiAgICBlbnRpdHkuaW1wb3J0UmVmZXJlbmNlLnB1c2goLi4uaW1wb3J0RXh0cmFjdG9yLmV4dHJhY3QocGFyc2VkUmVzdWx0KSlcbiAgICBlbnRpdHkuZXhwb3J0UmVmZXJlbmNlLnB1c2goLi4uZXhwb3J0RXh0cmFjdG9yLmV4dHJhY3QocGFyc2VkUmVzdWx0KSlcblxuICAgIHJldHVybiBbZW50aXR5XVxuICB9XG59XG4iXX0=