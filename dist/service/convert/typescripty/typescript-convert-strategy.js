"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.TypescriptConvertStrategy = void 0;
const entity_1 = require("src/model/entity");
const export_extractor_1 = require("src/service/convert/typescripty/export-extractor");
const import_extractor_1 = require("src/service/convert/typescripty/import-extractor");
const file_service_1 = require("src/service/file-service");
const typescript_parser_1 = require("typescript-parser");
const parser = new typescript_parser_1.TypescriptParser();
class TypescriptConvertStrategy {
    constructor({ filePath, rootPath, folderPath }) {
        this._filePath = filePath;
        this._rootPath = rootPath ?? '/';
        this._folderPath = folderPath;
    }
    async convert() {
        const parsedResult = await parser.parseFile(file_service_1.fileService.joinPaths(this._folderPath, this._filePath), this._rootPath);
        // TODO extract entity from parsed result
        const entity = new entity_1.Entity({ filePath: this._filePath });
        entity.importReference.push(...import_extractor_1.importExtractor.extract(parsedResult));
        entity.exportReference.push(...export_extractor_1.exportExtractor.extract(parsedResult));
        return [entity];
    }
}
exports.TypescriptConvertStrategy = TypescriptConvertStrategy;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidHlwZXNjcmlwdC1jb252ZXJ0LXN0cmF0ZWd5LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vc3JjL3NlcnZpY2UvY29udmVydC90eXBlc2NyaXB0eS90eXBlc2NyaXB0LWNvbnZlcnQtc3RyYXRlZ3kudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7O0FBQUEsNkNBQXlDO0FBRXpDLHVGQUFrRjtBQUNsRix1RkFBa0Y7QUFDbEYsMkRBQXNEO0FBQ3RELHlEQUFvRDtBQUVwRCxNQUFNLE1BQU0sR0FBRyxJQUFJLG9DQUFnQixFQUFFLENBQUE7QUFFckMsTUFBYSx5QkFBeUI7SUFJcEMsWUFBWSxFQUFFLFFBQVEsRUFBRSxRQUFRLEVBQUUsVUFBVSxFQUErRDtRQUN6RyxJQUFJLENBQUMsU0FBUyxHQUFHLFFBQVEsQ0FBQTtRQUN6QixJQUFJLENBQUMsU0FBUyxHQUFHLFFBQVEsSUFBSSxHQUFHLENBQUE7UUFDaEMsSUFBSSxDQUFDLFdBQVcsR0FBRyxVQUFVLENBQUE7SUFDL0IsQ0FBQztJQUVNLEtBQUssQ0FBQyxPQUFPO1FBQ2xCLE1BQU0sWUFBWSxHQUFHLE1BQU0sTUFBTSxDQUFDLFNBQVMsQ0FBQywwQkFBVyxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsV0FBVyxFQUFFLElBQUksQ0FBQyxTQUFTLENBQUMsRUFBRSxJQUFJLENBQUMsU0FBUyxDQUFDLENBQUE7UUFFcEgseUNBQXlDO1FBQ3pDLE1BQU0sTUFBTSxHQUFHLElBQUksZUFBTSxDQUFDLEVBQUUsUUFBUSxFQUFFLElBQUksQ0FBQyxTQUFTLEVBQUUsQ0FBQyxDQUFBO1FBRXZELE1BQU0sQ0FBQyxlQUFlLENBQUMsSUFBSSxDQUFDLEdBQUcsa0NBQWUsQ0FBQyxPQUFPLENBQUMsWUFBWSxDQUFDLENBQUMsQ0FBQTtRQUNyRSxNQUFNLENBQUMsZUFBZSxDQUFDLElBQUksQ0FBQyxHQUFHLGtDQUFlLENBQUMsT0FBTyxDQUFDLFlBQVksQ0FBQyxDQUFDLENBQUE7UUFFckUsT0FBTyxDQUFDLE1BQU0sQ0FBQyxDQUFBO0lBQ2pCLENBQUM7Q0FDRjtBQXJCRCw4REFxQkMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBFbnRpdHkgfSBmcm9tICdzcmMvbW9kZWwvZW50aXR5J1xuaW1wb3J0IHsgQ29udmVydFN0cmF0ZWd5IH0gZnJvbSAnc3JjL3NlcnZpY2UvY29udmVydC9jb252ZXJ0LXN0cmF0ZWd5J1xuaW1wb3J0IHsgZXhwb3J0RXh0cmFjdG9yIH0gZnJvbSAnc3JjL3NlcnZpY2UvY29udmVydC90eXBlc2NyaXB0eS9leHBvcnQtZXh0cmFjdG9yJ1xuaW1wb3J0IHsgaW1wb3J0RXh0cmFjdG9yIH0gZnJvbSAnc3JjL3NlcnZpY2UvY29udmVydC90eXBlc2NyaXB0eS9pbXBvcnQtZXh0cmFjdG9yJ1xuaW1wb3J0IHsgZmlsZVNlcnZpY2UgfSBmcm9tICdzcmMvc2VydmljZS9maWxlLXNlcnZpY2UnXG5pbXBvcnQgeyBUeXBlc2NyaXB0UGFyc2VyIH0gZnJvbSAndHlwZXNjcmlwdC1wYXJzZXInXG5cbmNvbnN0IHBhcnNlciA9IG5ldyBUeXBlc2NyaXB0UGFyc2VyKClcblxuZXhwb3J0IGNsYXNzIFR5cGVzY3JpcHRDb252ZXJ0U3RyYXRlZ3kgaW1wbGVtZW50cyBDb252ZXJ0U3RyYXRlZ3kge1xuICBwcm90ZWN0ZWQgcmVhZG9ubHkgX2ZpbGVQYXRoOiBzdHJpbmdcbiAgcHJvdGVjdGVkIHJlYWRvbmx5IF9yb290UGF0aDogc3RyaW5nXG4gIHByb3RlY3RlZCByZWFkb25seSBfZm9sZGVyUGF0aDogc3RyaW5nXG4gIGNvbnN0cnVjdG9yKHsgZmlsZVBhdGgsIHJvb3RQYXRoLCBmb2xkZXJQYXRoIH06IHsgZmlsZVBhdGg6IHN0cmluZzsgZm9sZGVyUGF0aDogc3RyaW5nOyByb290UGF0aD86IHN0cmluZyB9KSB7XG4gICAgdGhpcy5fZmlsZVBhdGggPSBmaWxlUGF0aFxuICAgIHRoaXMuX3Jvb3RQYXRoID0gcm9vdFBhdGggPz8gJy8nXG4gICAgdGhpcy5fZm9sZGVyUGF0aCA9IGZvbGRlclBhdGhcbiAgfVxuXG4gIHB1YmxpYyBhc3luYyBjb252ZXJ0KCk6IFByb21pc2U8RW50aXR5W10+IHtcbiAgICBjb25zdCBwYXJzZWRSZXN1bHQgPSBhd2FpdCBwYXJzZXIucGFyc2VGaWxlKGZpbGVTZXJ2aWNlLmpvaW5QYXRocyh0aGlzLl9mb2xkZXJQYXRoLCB0aGlzLl9maWxlUGF0aCksIHRoaXMuX3Jvb3RQYXRoKVxuXG4gICAgLy8gVE9ETyBleHRyYWN0IGVudGl0eSBmcm9tIHBhcnNlZCByZXN1bHRcbiAgICBjb25zdCBlbnRpdHkgPSBuZXcgRW50aXR5KHsgZmlsZVBhdGg6IHRoaXMuX2ZpbGVQYXRoIH0pXG5cbiAgICBlbnRpdHkuaW1wb3J0UmVmZXJlbmNlLnB1c2goLi4uaW1wb3J0RXh0cmFjdG9yLmV4dHJhY3QocGFyc2VkUmVzdWx0KSlcbiAgICBlbnRpdHkuZXhwb3J0UmVmZXJlbmNlLnB1c2goLi4uZXhwb3J0RXh0cmFjdG9yLmV4dHJhY3QocGFyc2VkUmVzdWx0KSlcblxuICAgIHJldHVybiBbZW50aXR5XVxuICB9XG59XG4iXX0=