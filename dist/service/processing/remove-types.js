"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.RemoveTypes = void 0;
const entity_types_1 = require("src/enum/entity-types");
class RemoveTypes {
    process(entities) {
        const { typeEntities, otherEntities } = entities.reduce((agg, cur) => {
            if (cur.Type === entity_types_1.EntityTypes.TYPE)
                agg.typeEntities.push(cur);
            else
                agg.otherEntities.push(cur);
            return agg;
        }, { typeEntities: [], otherEntities: [] });
        otherEntities.forEach((entity) => {
            if (entity.References.length === 0)
                return;
            entity.References = entity.References.filter((r) => !typeEntities.find((e) => r.InProjectPath === e.InProjectPath && r.Name === e.Name));
        });
        return otherEntities;
    }
}
exports.RemoveTypes = RemoveTypes;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicmVtb3ZlLXR5cGVzLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vc3JjL3NlcnZpY2UvcHJvY2Vzc2luZy9yZW1vdmUtdHlwZXMudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7O0FBQUEsd0RBQW1EO0FBSW5ELE1BQWEsV0FBVztJQUNmLE9BQU8sQ0FBQyxRQUFrQjtRQUMvQixNQUFNLEVBQUUsWUFBWSxFQUFFLGFBQWEsRUFBRSxHQUFHLFFBQVEsQ0FBQyxNQUFNLENBQ3JELENBQUMsR0FBRyxFQUFFLEdBQUcsRUFBRSxFQUFFO1lBQ1gsSUFBSSxHQUFHLENBQUMsSUFBSSxLQUFLLDBCQUFXLENBQUMsSUFBSTtnQkFBRSxHQUFHLENBQUMsWUFBWSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQTs7Z0JBQ3hELEdBQUcsQ0FBQyxhQUFhLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFBO1lBQ2hDLE9BQU8sR0FBRyxDQUFBO1FBQ1osQ0FBQyxFQUNELEVBQUUsWUFBWSxFQUFFLEVBQUUsRUFBRSxhQUFhLEVBQUUsRUFBRSxFQUFFLENBQ3hDLENBQUE7UUFFRCxhQUFhLENBQUMsT0FBTyxDQUFDLENBQUMsTUFBTSxFQUFFLEVBQUU7WUFDL0IsSUFBSSxNQUFNLENBQUMsVUFBVSxDQUFDLE1BQU0sS0FBSyxDQUFDO2dCQUFFLE9BQU07WUFDMUMsTUFBTSxDQUFDLFVBQVUsR0FBRyxNQUFNLENBQUMsVUFBVSxDQUFDLE1BQU0sQ0FDMUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsWUFBWSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDLGFBQWEsS0FBSyxDQUFDLENBQUMsYUFBYSxJQUFJLENBQUMsQ0FBQyxJQUFJLEtBQUssQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUMzRixDQUFBO1FBQ0gsQ0FBQyxDQUFDLENBQUE7UUFFRixPQUFPLGFBQWEsQ0FBQTtJQUN0QixDQUFDO0NBQ0Y7QUFwQkQsa0NBb0JDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRW50aXR5VHlwZXMgfSBmcm9tICdzcmMvZW51bS9lbnRpdHktdHlwZXMnXG5pbXBvcnQgeyBFbnRpdHkgfSBmcm9tICdzcmMvbW9kZWwvZW50aXR5J1xuaW1wb3J0IHsgUHJvY2Vzc2luZ1N0cmF0ZWd5IH0gZnJvbSAnc3JjL3NlcnZpY2UvcHJvY2Vzc2luZy9wcm9jZXNzaW5nLXNlcnZpY2UnXG5cbmV4cG9ydCBjbGFzcyBSZW1vdmVUeXBlcyBpbXBsZW1lbnRzIFByb2Nlc3NpbmdTdHJhdGVneSB7XG4gIHB1YmxpYyBwcm9jZXNzKGVudGl0aWVzOiBFbnRpdHlbXSk6IEVudGl0eVtdIHtcbiAgICBjb25zdCB7IHR5cGVFbnRpdGllcywgb3RoZXJFbnRpdGllcyB9ID0gZW50aXRpZXMucmVkdWNlPHsgdHlwZUVudGl0aWVzOiBFbnRpdHlbXTsgb3RoZXJFbnRpdGllczogRW50aXR5W10gfT4oXG4gICAgICAoYWdnLCBjdXIpID0+IHtcbiAgICAgICAgaWYgKGN1ci5UeXBlID09PSBFbnRpdHlUeXBlcy5UWVBFKSBhZ2cudHlwZUVudGl0aWVzLnB1c2goY3VyKVxuICAgICAgICBlbHNlIGFnZy5vdGhlckVudGl0aWVzLnB1c2goY3VyKVxuICAgICAgICByZXR1cm4gYWdnXG4gICAgICB9LFxuICAgICAgeyB0eXBlRW50aXRpZXM6IFtdLCBvdGhlckVudGl0aWVzOiBbXSB9XG4gICAgKVxuXG4gICAgb3RoZXJFbnRpdGllcy5mb3JFYWNoKChlbnRpdHkpID0+IHtcbiAgICAgIGlmIChlbnRpdHkuUmVmZXJlbmNlcy5sZW5ndGggPT09IDApIHJldHVyblxuICAgICAgZW50aXR5LlJlZmVyZW5jZXMgPSBlbnRpdHkuUmVmZXJlbmNlcy5maWx0ZXIoXG4gICAgICAgIChyKSA9PiAhdHlwZUVudGl0aWVzLmZpbmQoKGUpID0+IHIuSW5Qcm9qZWN0UGF0aCA9PT0gZS5JblByb2plY3RQYXRoICYmIHIuTmFtZSA9PT0gZS5OYW1lKVxuICAgICAgKVxuICAgIH0pXG5cbiAgICByZXR1cm4gb3RoZXJFbnRpdGllc1xuICB9XG59XG4iXX0=