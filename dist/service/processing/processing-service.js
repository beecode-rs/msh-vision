"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.processingService = void 0;
const remove_external_1 = require("src/service/processing/remove-external");
const remove_ignored_paths_1 = require("src/service/processing/remove-ignored-paths");
const remove_types_1 = require("src/service/processing/remove-types");
const simplify_entities_1 = require("src/service/processing/simplify-entities");
const config_1 = require("src/util/config");
exports.processingService = {
    process: (entities) => {
        const processingStrategies = [];
        const { print: { ignorePaths, ignoreTypes, ignoreExternal, simplifyEntities }, } = (0, config_1.visionConfig)();
        if (ignorePaths.length > 0)
            processingStrategies.push(new remove_ignored_paths_1.RemoveIgnoredPaths(ignorePaths));
        if (ignoreExternal)
            processingStrategies.push(new remove_external_1.RemoveExternal());
        if (ignoreTypes)
            processingStrategies.push(new remove_types_1.RemoveTypes());
        if (simplifyEntities.length > 0)
            processingStrategies.push(new simplify_entities_1.SimplifyEntities(simplifyEntities));
        return processingStrategies.reduce((agg, cur) => {
            return cur.process(agg);
        }, entities);
    },
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicHJvY2Vzc2luZy1zZXJ2aWNlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vc3JjL3NlcnZpY2UvcHJvY2Vzc2luZy9wcm9jZXNzaW5nLXNlcnZpY2UudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7O0FBQ0EsNEVBQXVFO0FBQ3ZFLHNGQUFnRjtBQUNoRixzRUFBaUU7QUFDakUsZ0ZBQTJFO0FBQzNFLDRDQUE4QztBQU1qQyxRQUFBLGlCQUFpQixHQUFHO0lBQy9CLE9BQU8sRUFBRSxDQUFDLFFBQWtCLEVBQVksRUFBRTtRQUN4QyxNQUFNLG9CQUFvQixHQUF5QixFQUFFLENBQUE7UUFFckQsTUFBTSxFQUNKLEtBQUssRUFBRSxFQUFFLFdBQVcsRUFBRSxXQUFXLEVBQUUsY0FBYyxFQUFFLGdCQUFnQixFQUFFLEdBQ3RFLEdBQUcsSUFBQSxxQkFBWSxHQUFFLENBQUE7UUFFbEIsSUFBSSxXQUFXLENBQUMsTUFBTSxHQUFHLENBQUM7WUFBRSxvQkFBb0IsQ0FBQyxJQUFJLENBQUMsSUFBSSx5Q0FBa0IsQ0FBQyxXQUFXLENBQUMsQ0FBQyxDQUFBO1FBQzFGLElBQUksY0FBYztZQUFFLG9CQUFvQixDQUFDLElBQUksQ0FBQyxJQUFJLGdDQUFjLEVBQUUsQ0FBQyxDQUFBO1FBQ25FLElBQUksV0FBVztZQUFFLG9CQUFvQixDQUFDLElBQUksQ0FBQyxJQUFJLDBCQUFXLEVBQUUsQ0FBQyxDQUFBO1FBQzdELElBQUksZ0JBQWdCLENBQUMsTUFBTSxHQUFHLENBQUM7WUFBRSxvQkFBb0IsQ0FBQyxJQUFJLENBQUMsSUFBSSxvQ0FBZ0IsQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDLENBQUE7UUFFbEcsT0FBTyxvQkFBb0IsQ0FBQyxNQUFNLENBQVcsQ0FBQyxHQUFHLEVBQUUsR0FBRyxFQUFFLEVBQUU7WUFDeEQsT0FBTyxHQUFHLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxDQUFBO1FBQ3pCLENBQUMsRUFBRSxRQUFRLENBQUMsQ0FBQTtJQUNkLENBQUM7Q0FDRixDQUFBIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRW50aXR5IH0gZnJvbSAnc3JjL3NlcnZpY2UvbW9kZWwvZW50aXR5J1xuaW1wb3J0IHsgUmVtb3ZlRXh0ZXJuYWwgfSBmcm9tICdzcmMvc2VydmljZS9wcm9jZXNzaW5nL3JlbW92ZS1leHRlcm5hbCdcbmltcG9ydCB7IFJlbW92ZUlnbm9yZWRQYXRocyB9IGZyb20gJ3NyYy9zZXJ2aWNlL3Byb2Nlc3NpbmcvcmVtb3ZlLWlnbm9yZWQtcGF0aHMnXG5pbXBvcnQgeyBSZW1vdmVUeXBlcyB9IGZyb20gJ3NyYy9zZXJ2aWNlL3Byb2Nlc3NpbmcvcmVtb3ZlLXR5cGVzJ1xuaW1wb3J0IHsgU2ltcGxpZnlFbnRpdGllcyB9IGZyb20gJ3NyYy9zZXJ2aWNlL3Byb2Nlc3Npbmcvc2ltcGxpZnktZW50aXRpZXMnXG5pbXBvcnQgeyB2aXNpb25Db25maWcgfSBmcm9tICdzcmMvdXRpbC9jb25maWcnXG5cbmV4cG9ydCBpbnRlcmZhY2UgUHJvY2Vzc2luZ1N0cmF0ZWd5IHtcbiAgcHJvY2VzcyhlbnRpdGllczogRW50aXR5W10pOiBFbnRpdHlbXVxufVxuXG5leHBvcnQgY29uc3QgcHJvY2Vzc2luZ1NlcnZpY2UgPSB7XG4gIHByb2Nlc3M6IChlbnRpdGllczogRW50aXR5W10pOiBFbnRpdHlbXSA9PiB7XG4gICAgY29uc3QgcHJvY2Vzc2luZ1N0cmF0ZWdpZXM6IFByb2Nlc3NpbmdTdHJhdGVneVtdID0gW11cblxuICAgIGNvbnN0IHtcbiAgICAgIHByaW50OiB7IGlnbm9yZVBhdGhzLCBpZ25vcmVUeXBlcywgaWdub3JlRXh0ZXJuYWwsIHNpbXBsaWZ5RW50aXRpZXMgfSxcbiAgICB9ID0gdmlzaW9uQ29uZmlnKClcblxuICAgIGlmIChpZ25vcmVQYXRocy5sZW5ndGggPiAwKSBwcm9jZXNzaW5nU3RyYXRlZ2llcy5wdXNoKG5ldyBSZW1vdmVJZ25vcmVkUGF0aHMoaWdub3JlUGF0aHMpKVxuICAgIGlmIChpZ25vcmVFeHRlcm5hbCkgcHJvY2Vzc2luZ1N0cmF0ZWdpZXMucHVzaChuZXcgUmVtb3ZlRXh0ZXJuYWwoKSlcbiAgICBpZiAoaWdub3JlVHlwZXMpIHByb2Nlc3NpbmdTdHJhdGVnaWVzLnB1c2gobmV3IFJlbW92ZVR5cGVzKCkpXG4gICAgaWYgKHNpbXBsaWZ5RW50aXRpZXMubGVuZ3RoID4gMCkgcHJvY2Vzc2luZ1N0cmF0ZWdpZXMucHVzaChuZXcgU2ltcGxpZnlFbnRpdGllcyhzaW1wbGlmeUVudGl0aWVzKSlcblxuICAgIHJldHVybiBwcm9jZXNzaW5nU3RyYXRlZ2llcy5yZWR1Y2U8RW50aXR5W10+KChhZ2csIGN1cikgPT4ge1xuICAgICAgcmV0dXJuIGN1ci5wcm9jZXNzKGFnZylcbiAgICB9LCBlbnRpdGllcylcbiAgfSxcbn1cbiJdfQ==